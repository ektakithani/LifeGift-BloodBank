Microsoft Windows [Version 10.0.18362.535]
(c) 2019 Microsoft Corporation. All rights reserved.

C:\Program Files\MySQL\MySQL Server 8.0\bin>mysql -u root -pabc123 -P 3310
mysql: [Warning] Using a password on the command line interface can be insecure.
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 508
Server version: 8.0.11 MySQL Community Server - GPL

Copyright (c) 2000, 2018, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql> select databases();
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'databases()' at line 1
mysql> select database();
+------------+
| database() |
+------------+
| NULL       |
+------------+
1 row in set (0.02 sec)

mysql> show databases;
+--------------------+
| Database           |
+--------------------+
| assignment         |
| book_db            |
| emp_db             |
| information_schema |
| mysql              |
| performance_schema |
| practice           |
| practice_sr        |
| sys                |
| thane10aug         |
| thane12oct         |
| thane14sept        |
| thane17aug         |
| thane21sep         |
| thane31aug         |
| thane5oct          |
| thane5sep          |
+--------------------+
17 rows in set (0.38 sec)

mysql> create database BloodBankManagementDB;
Query OK, 1 row affected (0.21 sec)

mysql> use BloodBankManagementDB;
Database changed
mysql> create table Donors(int id primary key not null auto_increment);
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'int id primary key not null auto_increment)' at line 1
mysql> create table Donors(int id primary  auto_increment);
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'int id primary  auto_increment)' at line 1
mysql> create table Donors(int id  auto_increment);
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'int id  auto_increment)' at line 1
mysql> cls
    -> clear;
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'cls
clear' at line 1
mysql> cls;
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'cls' at line 1
mysql> select database();
+-----------------------+
| database()            |
+-----------------------+
| bloodbankmanagementdb |
+-----------------------+
1 row in set (0.00 sec)

mysql> create table donors(id int not null auto_increment);
ERROR 1075 (42000): Incorrect table definition; there can be only one auto column and it must be defined as a key
mysql> create table donors(id int not null auto_increment,primary key(id));
Query OK, 0 rows affected (1.75 sec)

mysql> drop table donors;
Query OK, 0 rows affected (1.11 sec)

mysql> use BloodBankManagementdb;
Database changed
mysql> create table donors(Id int not null auto_increment , Firstname varchar(20) not null , Lastname varchar(20) not null , Gender varchar(20) , Age int not null , Contact bigint not null , Address varchar(20) not null , BloodGroup varchar(40) , primary key (Id));
Query OK, 0 rows affected (0.97 sec)

mysql> desc table donors;
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'table donors' at line 1
mysql> desc donors;
+------------+-------------+------+-----+---------+----------------+
| Field      | Type        | Null | Key | Default | Extra          |
+------------+-------------+------+-----+---------+----------------+
| Id         | int(11)     | NO   | PRI | NULL    | auto_increment |
| Firstname  | varchar(20) | NO   |     | NULL    |                |
| Lastname   | varchar(20) | NO   |     | NULL    |                |
| Gender     | varchar(20) | YES  |     | NULL    |                |
| Age        | int(11)     | NO   |     | NULL    |                |
| Contact    | bigint(20)  | NO   |     | NULL    |                |
| Address    | varchar(20) | NO   |     | NULL    |                |
| BloodGroup | varchar(40) | YES  |     | NULL    |                |
+------------+-------------+------+-----+---------+----------------+
8 rows in set (0.16 sec)

mysql> select database();
+-----------------------+
| database()            |
+-----------------------+
| bloodbankmanagementdb |
+-----------------------+
1 row in set (0.45 sec)

mysql> select database();
+-----------------------+
| database()            |
+-----------------------+
| bloodbankmanagementdb |
+-----------------------+
1 row in set (1.54 sec)

mysql> alter table donors
    -> modify Address varchar(50) not null;
Query OK, 0 rows affected (1.18 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> desc donors
    -> ;
+------------+-------------+------+-----+---------+----------------+
| Field      | Type        | Null | Key | Default | Extra          |
+------------+-------------+------+-----+---------+----------------+
| Id         | int(11)     | NO   | PRI | NULL    | auto_increment |
| Firstname  | varchar(20) | NO   |     | NULL    |                |
| Lastname   | varchar(20) | NO   |     | NULL    |                |
| Gender     | varchar(20) | YES  |     | NULL    |                |
| Age        | int(11)     | NO   |     | NULL    |                |
| Contact    | bigint(20)  | NO   |     | NULL    |                |
| Address    | varchar(50) | NO   |     | NULL    |                |
| BloodGroup | varchar(40) | YES  |     | NULL    |                |
+------------+-------------+------+-----+---------+----------------+
8 rows in set (0.17 sec)

mysql> select * from donors;
+----+-----------+----------+--------+-----+-----------+-----------------------+-----------------------------+
| Id | Firstname | Lastname | Gender | Age | Contact   | Address               | BloodGroup                  |
+----+-----------+----------+--------+-----+-----------+-----------------------+-----------------------------+
|  1 | Danielle  | Riley    | Female |  25 | 719207795 | 6431 Mockingbird Hill | A+ (A Positive Blood Group) |
+----+-----------+----------+--------+-----+-----------+-----------------------+-----------------------------+
1 row in set (0.00 sec)

mysql> create table patients(Id int not null auto_increment , Firstname varchar(20) not null , Lastname varchar(20) not null , Gender varchar(20) , Age int not null , Contact bigint not null , Address varchar(20) not null , BloodGroup varchar(40) , primary key (Id));
Query OK, 0 rows affected (2.16 sec)

mysql> select * from patients;
+----+-----------+----------+--------+-----+------------+---------------+-----------------------------+
| Id | Firstname | Lastname | Gender | Age | Contact    | Address       | BloodGroup                  |
+----+-----------+----------+--------+-----+------------+---------------+-----------------------------+
|  1 | Mathew    | Marshall | Male   |  29 | 1775727527 | 9883 Royal Ln | A+ (A Positive Blood Group) |
+----+-----------+----------+--------+-----+------------+---------------+-----------------------------+
1 row in set (0.02 sec)

mysql> create table available_blood(BloodGroup varchar(50) primary key , Amount_Available(in Litres) int );
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(in Litres) int )' at line 1
mysql> create table available_blood(BloodGroup varchar(50) primary key , Amount_Available int );
Query OK, 0 rows affected (1.41 sec)

mysql> desc available_blood;
+------------------+-------------+------+-----+---------+-------+
| Field            | Type        | Null | Key | Default | Extra |
+------------------+-------------+------+-----+---------+-------+
| BloodGroup       | varchar(50) | NO   | PRI | NULL    |       |
| Amount_Available | int(11)     | YES  |     | NULL    |       |
+------------------+-------------+------+-----+---------+-------+
2 rows in set (0.31 sec)

mysql> insert into available_blood(BloodGroup) values(A+ (A Positive));
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'Positive))' at line 1
mysql> insert into available_blood(BloodGroup) values('A + (A Positive)');
Query OK, 1 row affected (0.36 sec)

mysql> insert into available_blood(BloodGroup) values('A - (A Negative)');
Query OK, 1 row affected (0.15 sec)

mysql> insert into available_blood(BloodGroup) values('B + (B Positive)');
Query OK, 1 row affected (0.20 sec)

mysql> insert into available_blood(BloodGroup) values('B - (B Negative)');
Query OK, 1 row affected (0.13 sec)

mysql> insert into available_blood(BloodGroup) values('AB + (AB Positive)');
Query OK, 1 row affected (0.12 sec)

mysql> insert into available_blood(BloodGroup) values('AB - (AB Negative)');
Query OK, 1 row affected (0.22 sec)

mysql> insert into available_blood(BloodGroup) values('O + (O Positive)');
Query OK, 1 row affected (0.37 sec)

mysql> insert into available_blood(BloodGroup) values('O - (O Negative)');
Query OK, 1 row affected (0.25 sec)

mysql> select * from available_blood;
+--------------------+------------------+
| BloodGroup         | Amount_Available |
+--------------------+------------------+
| A - (A Negative)   |             NULL |
| A + (A Positive)   |             NULL |
| AB - (AB Negative) |             NULL |
| AB + (AB Positive) |             NULL |
| B - (B Negative)   |             NULL |
| B + (B Positive)   |             NULL |
| O - (O Negative)   |             NULL |
| O + (O Positive)   |             NULL |
+--------------------+------------------+
8 rows in set (0.01 sec)

mysql> select * from available_blood;
+--------------------+------------------+
| BloodGroup         | Amount_Available |
+--------------------+------------------+
| A - (A Negative)   |             NULL |
| A + (A Positive)   |             NULL |
| AB - (AB Negative) |             NULL |
| AB + (AB Positive) |             NULL |
| B - (B Negative)   |             NULL |
| B + (B Positive)   |             NULL |
| O - (O Negative)   |             NULL |
| O + (O Positive)   |             NULL |
+--------------------+------------------+
8 rows in set (0.00 sec)

mysql> select * from donors;
+----+-----------+----------+--------+-----+------------+-----------------------+-------------------------------+
| Id | Firstname | Lastname | Gender | Age | Contact    | Address               | BloodGroup                    |
+----+-----------+----------+--------+-----+------------+-----------------------+-------------------------------+
|  1 | Danielle  | Riley    | Female |  25 |  719207795 | 6431 Mockingbird Hill | A+ (A Positive Blood Group)   |
|  2 | Janet     | Snyder   | Female |  25 | 7676107803 | 5886 Lakeshore Rd     | B+ (B Positive Blood Group)   |
|  3 | Fernando  | Andrews  | Male   |  42 | 2226908576 | 1886 Miller Ave       | AB- (AB Negative Blood Group) |
|  4 | Joann     | Fields   | Female |  19 | 3675788727 | 239 Oak Lawn Ave      | O- (O Negative Blood Group)   |
|  5 | Stephen   | Adams    | Male   |  62 | 3654063032 | 4493 Valwood Pkwy     | O+ (O Positive Blood Group)   |
+----+-----------+----------+--------+-----+------------+-----------------------+-------------------------------+
5 rows in set (0.00 sec)

mysql> select * from available_blood
    -> ;
+--------------------+------------------+
| BloodGroup         | Amount_Available |
+--------------------+------------------+
| A - (A Negative)   |             NULL |
| A + (A Positive)   |             NULL |
| AB - (AB Negative) |             NULL |
| AB + (AB Positive) |             NULL |
| B - (B Negative)   |             NULL |
| B + (B Positive)   |             NULL |
| O - (O Negative)   |             NULL |
| O + (O Positive)   |             NULL |
+--------------------+------------------+
8 rows in set (0.00 sec)

mysql> truncate available_blood;
Query OK, 0 rows affected (1.31 sec)

mysql> insert into available_blood(BloodGroup) values('A+ (A Positive Blood Group)');
Query OK, 1 row affected (1.88 sec)

mysql> insert into available_blood(BloodGroup) values('A- (A  Negative Blood Group)');
Query OK, 1 row affected (0.19 sec)

mysql> insert into available_blood(BloodGroup) values('B+ (B Positive Blood Group)');
Query OK, 1 row affected (0.20 sec)

mysql> insert into available_blood(BloodGroup) values('B- (B Negative Blood Group)');
Query OK, 1 row affected (0.15 sec)

mysql> insert into available_blood(BloodGroup) values('AB+ (AB Positive Blood Group)');
Query OK, 1 row affected (0.28 sec)

mysql> insert into available_blood(BloodGroup) values('AB- (AB Negative Blood Group)');
Query OK, 1 row affected (0.48 sec)

mysql> insert into available_blood(BloodGroup) values('O+ (O Positive Blood Group)');
Query OK, 1 row affected (0.18 sec)

mysql> insert into available_blood(BloodGroup) values('O- (O Negative Blood Group)');
Query OK, 1 row affected (0.14 sec)

mysql> select * from available_blood;
+-------------------------------+------------------+
| BloodGroup                    | Amount_Available |
+-------------------------------+------------------+
| A- (A  Negative Blood Group)  |             NULL |
| A+ (A Positive Blood Group)   |             NULL |
| AB- (AB Negative Blood Group) |             NULL |
| AB+ (AB Positive Blood Group) |             NULL |
| B- (B Negative Blood Group)   |             NULL |
| B+ (B Positive Blood Group)   |             NULL |
| O- (O Negative Blood Group)   |             NULL |
| O+ (O Positive Blood Group)   |             NULL |
+-------------------------------+------------------+
8 rows in set (0.00 sec)

mysql> trucate available_blood;
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'trucate available_blood' at line 1
mysql> truncate available_blood;
Query OK, 0 rows affected (0.98 sec)

mysql> insert into available_blood(BloodGroup) values('A+(A Positive Blood Group)');
Query OK, 1 row affected (0.25 sec)

mysql> insert into available_blood(BloodGroup) values('A-(A Negative Blood Group)');
Query OK, 1 row affected (0.11 sec)

mysql> insert into available_blood(BloodGroup) values('B+(B Positive Blood Group)');
Query OK, 1 row affected (0.08 sec)

mysql> insert into available_blood(BloodGroup) values('B-(B Negative Blood Group)');
Query OK, 1 row affected (0.22 sec)

mysql> insert into available_blood(BloodGroup) values('AB+(AB Positive Blood Group)');
Query OK, 1 row affected (0.26 sec)

mysql> insert into available_blood(BloodGroup) values('AB-(AB Negative Blood Group)');
Query OK, 1 row affected (0.11 sec)

mysql> insert into available_blood(BloodGroup) values('O+(O Positive Blood Group)');
Query OK, 1 row affected (0.14 sec)

mysql> insert into available_blood(BloodGroup) values('O-(O Negative Blood Group)');
Query OK, 1 row affected (0.12 sec)

mysql> select * from available_blood;
+------------------------------+------------------+
| BloodGroup                   | Amount_Available |
+------------------------------+------------------+
| A-(A Negative Blood Group)   |             NULL |
| A+(A Positive Blood Group)   |             NULL |
| AB-(AB Negative Blood Group) |             NULL |
| AB+(AB Positive Blood Group) |             NULL |
| B-(B Negative Blood Group)   |             NULL |
| B+(B Positive Blood Group)   |             NULL |
| O-(O Negative Blood Group)   |             NULL |
| O+(O Positive Blood Group)   |             NULL |
+------------------------------+------------------+
8 rows in set (0.00 sec)

mysql> select * from dinors;
ERROR 1146 (42S02): Table 'bloodbankmanagementdb.dinors' doesn't exist
mysql> select * from dnors;
ERROR 1146 (42S02): Table 'bloodbankmanagementdb.dnors' doesn't exist
mysql> select * from donors;
+----+-----------+----------+--------+-----+------------+-----------------------+-------------------------------+
| Id | Firstname | Lastname | Gender | Age | Contact    | Address               | BloodGroup                    |
+----+-----------+----------+--------+-----+------------+-----------------------+-------------------------------+
|  1 | Danielle  | Riley    | Female |  25 |  719207795 | 6431 Mockingbird Hill | A+ (A Positive Blood Group)   |
|  2 | Janet     | Snyder   | Female |  25 | 7676107803 | 5886 Lakeshore Rd     | B+ (B Positive Blood Group)   |
|  3 | Fernando  | Andrews  | Male   |  42 | 2226908576 | 1886 Miller Ave       | AB- (AB Negative Blood Group) |
|  4 | Joann     | Fields   | Female |  19 | 3675788727 | 239 Oak Lawn Ave      | O- (O Negative Blood Group)   |
|  5 | Stephen   | Adams    | Male   |  62 | 3654063032 | 4493 Valwood Pkwy     | O+ (O Positive Blood Group)   |
+----+-----------+----------+--------+-----+------------+-----------------------+-------------------------------+
5 rows in set (0.00 sec)

mysql> truncate donors;
Query OK, 0 rows affected (0.99 sec)

mysql> select * from available_blood;
+------------------------------+------------------+
| BloodGroup                   | Amount_Available |
+------------------------------+------------------+
| A-(A Negative Blood Group)   |             NULL |
| A+(A Positive Blood Group)   |             NULL |
| AB-(AB Negative Blood Group) |             NULL |
| AB+(AB Positive Blood Group) |             NULL |
| B-(B Negative Blood Group)   |             NULL |
| B+(B Positive Blood Group)   |             NULL |
| O-(O Negative Blood Group)   |             NULL |
| O+(O Positive Blood Group)   |             NULL |
+------------------------------+------------------+
8 rows in set (0.00 sec)

mysql> insert into available_blood(Amount_Available) values(0,0,0,0,0,0,0,0);
ERROR 1136 (21S01): Column count doesn't match value count at row 1
mysql> insert into available_blood(Amount_Available) values(0),(0),(0),(0),(0),(0),(0),(0);
ERROR 1364 (HY000): Field 'BloodGroup' doesn't have a default value
mysql> update available_blood set Amount_Available = 0;
Query OK, 8 rows affected (0.98 sec)
Rows matched: 8  Changed: 8  Warnings: 0

mysql> alter table available_blood
    -> modify Amount_Available int not null;
Query OK, 0 rows affected (2.17 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> select * from available_blood;
+------------------------------+------------------+
| BloodGroup                   | Amount_Available |
+------------------------------+------------------+
| A-(A Negative Blood Group)   |                0 |
| A+(A Positive Blood Group)   |                0 |
| AB-(AB Negative Blood Group) |                0 |
| AB+(AB Positive Blood Group) |                0 |
| B-(B Negative Blood Group)   |                0 |
| B+(B Positive Blood Group)   |                0 |
| O-(O Negative Blood Group)   |                0 |
| O+(O Positive Blood Group)   |                0 |
+------------------------------+------------------+
8 rows in set (0.00 sec)

mysql> select * from available_blood;
+------------------------------+------------------+
| BloodGroup                   | Amount_Available |
+------------------------------+------------------+
| A-(A Negative Blood Group)   |                0 |
| A+(A Positive Blood Group)   |                4 |
| AB-(AB Negative Blood Group) |                0 |
| AB+(AB Positive Blood Group) |                0 |
| B-(B Negative Blood Group)   |                0 |
| B+(B Positive Blood Group)   |                0 |
| O-(O Negative Blood Group)   |                0 |
| O+(O Positive Blood Group)   |                0 |
+------------------------------+------------------+
8 rows in set (0.01 sec)

mysql> create table donated(Id int not null , Amount_Donated , created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP);
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ', created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP)' at line 1
mysql> create table donated(Id int not null , Amount_Donated int not null , created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP);
Query OK, 0 rows affected (0.84 sec)

mysql> select * from donated;
Empty set (0.04 sec)

mysql> desc donated;
+----------------+-----------+------+-----+-------------------+-------+
| Field          | Type      | Null | Key | Default           | Extra |
+----------------+-----------+------+-----+-------------------+-------+
| Id             | int(11)   | NO   |     | NULL              |       |
| Amount_Donated | int(11)   | NO   |     | NULL              |       |
| created_at     | timestamp | YES  |     | CURRENT_TIMESTAMP |       |
+----------------+-----------+------+-----+-------------------+-------+
3 rows in set (0.04 sec)

mysql> alter table donated
    -> modify created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP not null;
Query OK, 0 rows affected (1.34 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> desc donated;
+----------------+-----------+------+-----+-------------------+-------+
| Field          | Type      | Null | Key | Default           | Extra |
+----------------+-----------+------+-----+-------------------+-------+
| Id             | int(11)   | NO   |     | NULL              |       |
| Amount_Donated | int(11)   | NO   |     | NULL              |       |
| created_at     | timestamp | NO   |     | CURRENT_TIMESTAMP |       |
+----------------+-----------+------+-----+-------------------+-------+
3 rows in set (0.05 sec)

mysql> select * from donated;
+----+----------------+---------------------+
| Id | Amount_Donated | created_at          |
+----+----------------+---------------------+
|  2 |              2 | 2019-12-28 19:33:12 |
+----+----------------+---------------------+
1 row in set (0.00 sec)

mysql> truncate table patients;
Query OK, 0 rows affected (1.17 sec)

mysql> create 
 check_blood_if_less_than_zero_available after update on available_blood
    -> for each row
    -> if(new.Amount<0)
    -> signal SQLSTATE '12345' set message="Blood not available ! ";
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'signal SQLSTATE '12345' set message="Blood not available ! "' at line 4
mysql> delimiter $$
mysql> create trigger check_blood_if_less_than_zero_available after update on available_blood
    -> for each row
    -> begin
    -> if(new.Amount<0)
    -> then
    -> signal SQLSTATE '12345' set message="Blood not available ! ";
    -> endif;
    -> end$$
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'message="Blood not available ! ";
endif;
end' at line 6
mysql> delimiter $$
mysql> create trigger check_blood_if_less_than_zero_available after update on available_blood
    -> for each row
    -> begin
    -> if(new.Amount<0)
    -> then
    -> signal SQLSTATE '12345' set message="Blood not available ! ";
    -> ;
    -> $$
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'message="Blood not available ! "' at line 6
mysql> delimiter $$
mysql> create trigger check_blood_if_less_than_zero_available after update on available_blood
    -> for each row
    -> begin
    -> if(new.Amount<0)
    -> then
    -> signal SQLSTATE '12345' set message_text='Blood not available ! ';
    -> endif;
    -> end$$
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ';
end' at line 7
mysql> delimiter $$
mysql> create trigger check_blood_if_less_than_zero_available after update on available_blood
    -> for each row
    -> begin
    -> if(new.Amount<0)
    -> signal SQLSTATE '12345' set message_text='Blood not available ! ';
    -> end if;
    -> end $$
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'signal SQLSTATE '12345' set message_text='Blood not available ! ';
end if;
end' at line 5
mysql> delimiter $$
mysql> create trigger patients_backup after insert on patients for each row
    -> begin
    -> )$$
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ')' at line 3
mysql> delimiter ;
mysql> create table patients_backup like patients;
Query OK, 0 rows affected (0.95 sec)

mysql> desc patients_backup
    -> ;
+------------+-------------+------+-----+---------+----------------+
| Field      | Type        | Null | Key | Default | Extra          |
+------------+-------------+------+-----+---------+----------------+
| Id         | int(11)     | NO   | PRI | NULL    | auto_increment |
| Firstname  | varchar(20) | NO   |     | NULL    |                |
| Lastname   | varchar(20) | NO   |     | NULL    |                |
| Gender     | varchar(20) | YES  |     | NULL    |                |
| Age        | int(11)     | NO   |     | NULL    |                |
| Contact    | bigint(20)  | NO   |     | NULL    |                |
| Address    | varchar(20) | NO   |     | NULL    |                |
| BloodGroup | varchar(40) | YES  |     | NULL    |                |
+------------+-------------+------+-----+---------+----------------+
8 rows in set (0.04 sec)

mysql> create table donors_backup like donors;
Query OK, 0 rows affected (0.51 sec)

mysql> show tables;
+---------------------------------+
| Tables_in_bloodbankmanagementdb |
+---------------------------------+
| available_blood                 |
| donated                         |
| donors                          |
| donors_backup                   |
| patients                        |
| patients_backup                 |
+---------------------------------+
6 rows in set (0.29 sec)

mysql> desc available_blood;
+------------------+-------------+------+-----+---------+-------+
| Field            | Type        | Null | Key | Default | Extra |
+------------------+-------------+------+-----+---------+-------+
| BloodGroup       | varchar(50) | NO   | PRI | NULL    |       |
| Amount_Available | int(11)     | NO   |     | NULL    |       |
+------------------+-------------+------+-----+---------+-------+
2 rows in set (0.00 sec)

mysql> desc donated;
+----------------+-----------+------+-----+-------------------+-------+
| Field          | Type      | Null | Key | Default           | Extra |
+----------------+-----------+------+-----+-------------------+-------+
| Id             | int(11)   | NO   |     | NULL              |       |
| Amount_Donated | int(11)   | NO   |     | NULL              |       |
| created_at     | timestamp | NO   |     | CURRENT_TIMESTAMP |       |
+----------------+-----------+------+-----+-------------------+-------+
3 rows in set (0.00 sec)

mysql> alter table donated
    -> modify Id int foreign key references patients(Id);
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'foreign key references patients(Id)' at line 2
mysql> alter table donated
    -> modify Id int not null,foreign key references patients(Id);
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'foreign key references patients(Id)' at line 2
mysql> alter table donated
    -> add foreign key(Id) references patients(Id);
Query OK, 1 row affected (2.36 sec)
Records: 1  Duplicates: 0  Warnings: 0

mysql> delimiter $$
mysql> create trigger PB after insert on patients for each row
    -> begin
    -> insert into patients_backup values(new.Id,new.Firstname,new.Lastname,new.Gender,new.Age,new.Contact,new.Address,new.BloodGroup);
    -> end if;
    -> end $$
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'if;
end' at line 4
mysql> delimiter $$
mysql> create trigger PB after insert on patients for each row
    -> begin
    -> insert into patients_backup values(new.Id,new.Firstname,new.Lastname,new.Gender,new.Age,new.Contact,new.Address,new.BloodGroup);
    -> end $$
Query OK, 0 rows affected (0.26 sec)

mysql> select * from patients_backup;
    -> $$
Empty set (0.04 sec)

mysql> delimiter $$
mysql> create trigger PB after insert on patients for each row
    -> create trigger PB after insert on patients for each row^S$$
ERROR 1303 (2F003): Can't create a TRIGGER from within another stored routine
mysql> delimiter $$
mysql> create trigger DB after insert on donors for each row
    -> insert into donors_backup values(new.Id,new.Firstname,new.Lastname,new.Gender,new.Age,new.Contact,new.Address,new.BloodGroup);
    -> end $$
Query OK, 0 rows affected (0.12 sec)

ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'end' at line 1
mysql> select * from donors_backup$$
Empty set (0.05 sec)

mysql> select * from donor_backup;
    -> $$
ERROR 1146 (42S02): Table 'bloodbankmanagementdb.donor_backup' doesn't exist
mysql> select * from donors_backup
    -> $$
+----+-----------+----------+--------+-----+------------+----------------+----------------------------+
| Id | Firstname | Lastname | Gender | Age | Contact    | Address        | BloodGroup                 |
+----+-----------+----------+--------+-----+------------+----------------+----------------------------+
|  5 | Sara      | Bennett  | Female |  50 | 7462046952 | 140 W Pecan St | A+(A Positive Blood Group) |
+----+-----------+----------+--------+-----+------------+----------------+----------------------------+
1 row in set (0.00 sec)

mysql> select * from patients;
    -> delimiter ;
    -> $$
+----+-----------+----------+--------+-----+------------+---------------------+-------------------------------+
| Id | Firstname | Lastname | Gender | Age | Contact    | Address             | BloodGroup                    |
+----+-----------+----------+--------+-----+------------+---------------------+-------------------------------+
|  1 | Debra     | Alvarez  | Female |  36 | 1407911776 | 2956 Pecan Acres Ln | A- (A  Negative Blood Group)  |
|  2 | Janice    | Russell  | Female |  44 | 1880600118 | 9822 Green Rd       | AB+ (AB Positive Blood Group) |
|  3 | Clara     | Romero   | Female |  33 | 1269371256 | 5563 Bollinger Rd   | A+ (A Positive Blood Group)   |
+----+-----------+----------+--------+-----+------------+---------------------+-------------------------------+
3 rows in set (0.18 sec)

ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'delimiter' at line 1
mysql> delimiter ;
mysql> select * from patients;
+----+-----------+----------+--------+-----+------------+---------------------+-------------------------------+
| Id | Firstname | Lastname | Gender | Age | Contact    | Address             | BloodGroup                    |
+----+-----------+----------+--------+-----+------------+---------------------+-------------------------------+
|  1 | Debra     | Alvarez  | Female |  36 | 1407911776 | 2956 Pecan Acres Ln | A- (A  Negative Blood Group)  |
|  2 | Janice    | Russell  | Female |  44 | 1880600118 | 9822 Green Rd       | AB+ (AB Positive Blood Group) |
|  3 | Clara     | Romero   | Female |  33 | 1269371256 | 5563 Bollinger Rd   | A+ (A Positive Blood Group)   |
+----+-----------+----------+--------+-----+------------+---------------------+-------------------------------+
3 rows in set (0.00 sec)

mysql> select * from donors;
+----+-----------+----------+--------+-----+------------+------------------+----------------------------+
| Id | Firstname | Lastname | Gender | Age | Contact    | Address          | BloodGroup                 |
+----+-----------+----------+--------+-----+------------+------------------+----------------------------+
|  1 | Sean      | Prescott | Male   |  25 | 7389944397 | 4894 Woodland St | A+(A Positive Blood Group) |
|  2 | Hailey    | Burke    | Female |  44 | 6067218613 | 8892 Spring St   | A+(A Positive Blood Group) |
|  3 | Jeremy    | Dixon    | Male   |  26 | 3471626422 | 2514 Dane St     | O-(O Negative Blood Group) |
|  4 | Gwendolyn | Shelton  | Female |  26 | 4778315960 | 1441 Paddock Way | A-(A Negative Blood Group) |
|  5 | Sara      | Bennett  | Female |  50 | 7462046952 | 140 W Pecan St   | A+(A Positive Blood Group) |
+----+-----------+----------+--------+-----+------------+------------------+----------------------------+
5 rows in set (0.18 sec)

mysql> select * froma available_blood;
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'froma available_blood' at line 1
mysql> select * from available_blood;
+------------------------------+------------------+
| BloodGroup                   | Amount_Available |
+------------------------------+------------------+
| A-(A Negative Blood Group)   |                0 |
| A+(A Positive Blood Group)   |                7 |
| AB-(AB Negative Blood Group) |                0 |
| AB+(AB Positive Blood Group) |                0 |
| B-(B Negative Blood Group)   |                0 |
| B+(B Positive Blood Group)   |                0 |
| O-(O Negative Blood Group)   |                0 |
| O+(O Positive Blood Group)   |                0 |
+------------------------------+------------------+
8 rows in set (0.01 sec)

mysql> desc donated;
+----------------+-----------+------+-----+-------------------+-------+
| Field          | Type      | Null | Key | Default           | Extra |
+----------------+-----------+------+-----+-------------------+-------+
| Id             | int(11)   | NO   | MUL | NULL              |       |
| Amount_Donated | int(11)   | NO   |     | NULL              |       |
| created_at     | timestamp | NO   |     | CURRENT_TIMESTAMP |       |
+----------------+-----------+------+-----+-------------------+-------+
3 rows in set (0.14 sec)

mysql> select * from donated;
+----+----------------+---------------------+
| Id | Amount_Donated | created_at          |
+----+----------------+---------------------+
|  2 |              2 | 2019-12-28 19:33:12 |
+----+----------------+---------------------+
1 row in set (0.03 sec)

mysql> create table patients_taken_blood(Id int,Amount_Taken varchar(50) , created_at TIMESTAMP DEFAULT CURRENT TIMESTAMP);
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'CURRENT TIMESTAMP)' at line 1
mysql> create table patients_taken_blood(Id int,Amount_Taken varchar(50) , created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP);
Query OK, 0 rows affected (0.73 sec)

mysql> show triggers;
+---------+--------+----------+--------------------------------------------------------------------------------------------------------------------------------------------+--------+------------------------+--------------------------------------------+----------------+----------------------+----------------------+--------------------+
| Trigger | Event  | Table    | Statement                                                                                                                                  | Timing | Created                | sql_mode                                   | Definer        | character_set_client | collation_connection | Database Collation |
+---------+--------+----------+--------------------------------------------------------------------------------------------------------------------------------------------+--------+------------------------+--------------------------------------------+----------------+----------------------+----------------------+--------------------+
| DB      | INSERT | donors   | insert into donors_backup values(new.Id,new.Firstname,new.Lastname,new.Gender,new.Age,new.Contact,new.Address,new.BloodGroup);             | AFTER  | 2019-12-28 22:03:40.50 | STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION | root@localhost | cp850                | cp850_general_ci     | utf8mb4_0900_ai_ci |
| PB      | INSERT | patients | begin
insert into patients_backup values(new.Id,new.Firstname,new.Lastname,new.Gender,new.Age,new.Contact,new.Address,new.BloodGroup);
end | AFTER  | 2019-12-28 22:01:55.88 | STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION | root@localhost | cp850                | cp850_general_ci     | utf8mb4_0900_ai_ci |
+---------+--------+----------+--------------------------------------------------------------------------------------------------------------------------------------------+--------+------------------------+--------------------------------------------+----------------+----------------------+----------------------+--------------------+
2 rows in set (0.22 sec)

mysql> show triggers\G;
*************************** 1. row ***************************
             Trigger: DB
               Event: INSERT
               Table: donors
           Statement: insert into donors_backup values(new.Id,new.Firstname,new.Lastname,new.Gender,new.Age,new.Contact,new.Address,new.BloodGroup);
              Timing: AFTER
             Created: 2019-12-28 22:03:40.50
            sql_mode: STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION
             Definer: root@localhost
character_set_client: cp850
collation_connection: cp850_general_ci
  Database Collation: utf8mb4_0900_ai_ci
*************************** 2. row ***************************
             Trigger: PB
               Event: INSERT
               Table: patients
           Statement: begin
insert into patients_backup values(new.Id,new.Firstname,new.Lastname,new.Gender,new.Age,new.Contact,new.Address,new.BloodGroup);
end
              Timing: AFTER
             Created: 2019-12-28 22:01:55.88
            sql_mode: STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION
             Definer: root@localhost
character_set_client: cp850
collation_connection: cp850_general_ci
  Database Collation: utf8mb4_0900_ai_ci
2 rows in set (0.02 sec)

ERROR:
No query specified

mysql> show tables;
+---------------------------------+
| Tables_in_bloodbankmanagementdb |
+---------------------------------+
| available_blood                 |
| donated                         |
| donors                          |
| donors_backup                   |
| patients                        |
| patients_backup                 |
| patients_taken_blood            |
+---------------------------------+
7 rows in set (0.01 sec)

mysql> select * from available_blood
    -> ;
+------------------------------+------------------+
| BloodGroup                   | Amount_Available |
+------------------------------+------------------+
| A-(A Negative Blood Group)   |                0 |
| A+(A Positive Blood Group)   |                7 |
| AB-(AB Negative Blood Group) |                0 |
| AB+(AB Positive Blood Group) |                0 |
| B-(B Negative Blood Group)   |                0 |
| B+(B Positive Blood Group)   |                0 |
| O-(O Negative Blood Group)   |                0 |
| O+(O Positive Blood Group)   |                0 |
+------------------------------+------------------+
8 rows in set (0.02 sec)

mysql> select @amnt;
+-------+
| @amnt |
+-------+
| NULL  |
+-------+
1 row in set (0.12 sec)

mysql> select * from available;
ERROR 1146 (42S02): Table 'bloodbankmanagementdb.available' doesn't exist
mysql> select * from available_blood;
+------------------------------+------------------+
| BloodGroup                   | Amount_Available |
+------------------------------+------------------+
| A-(A Negative Blood Group)   |                0 |
| A+(A Positive Blood Group)   |                7 |
| AB-(AB Negative Blood Group) |                0 |
| AB+(AB Positive Blood Group) |                0 |
| B-(B Negative Blood Group)   |                0 |
| B+(B Positive Blood Group)   |                0 |
| O-(O Negative Blood Group)   |                0 |
| O+(O Positive Blood Group)   |                0 |
+------------------------------+------------------+
8 rows in set (0.02 sec)

mysql> select * from donated;
+----+----------------+---------------------+
| Id | Amount_Donated | created_at          |
+----+----------------+---------------------+
|  2 |              2 | 2019-12-28 19:33:12 |
+----+----------------+---------------------+
1 row in set (0.16 sec)

mysql> select bloodgroup from donors where id=2;
+----------------------------+
| bloodgroup                 |
+----------------------------+
| A+(A Positive Blood Group) |
+----------------------------+
1 row in set (0.02 sec)

mysql> select bloodgroup from patients where id=2;
+-------------------------------+
| bloodgroup                    |
+-------------------------------+
| AB+ (AB Positive Blood Group) |
+-------------------------------+
1 row in set (0.10 sec)

mysql> select @amnt;
+-------+
| @amnt |
+-------+
| NULL  |
+-------+
1 row in set (0.00 sec)

mysql> select * from available_blood;
+------------------------------+------------------+
| BloodGroup                   | Amount_Available |
+------------------------------+------------------+
| A-(A Negative Blood Group)   |                0 |
| A+(A Positive Blood Group)   |                7 |
| AB-(AB Negative Blood Group) |                0 |
| AB+(AB Positive Blood Group) |                6 |
| B-(B Negative Blood Group)   |                0 |
| B+(B Positive Blood Group)   |                0 |
| O-(O Negative Blood Group)   |                0 |
| O+(O Positive Blood Group)   |                0 |
+------------------------------+------------------+
8 rows in set (0.00 sec)

mysql> select @amnt;
+-------+
| @amnt |
+-------+
| NULL  |
+-------+
1 row in set (0.00 sec)

mysql> select * from available_blood;
+------------------------------+------------------+
| BloodGroup                   | Amount_Available |
+------------------------------+------------------+
| A-(A Negative Blood Group)   |                0 |
| A+(A Positive Blood Group)   |                7 |
| AB-(AB Negative Blood Group) |                0 |
| AB+(AB Positive Blood Group) |                6 |
| B-(B Negative Blood Group)   |                0 |
| B+(B Positive Blood Group)   |                0 |
| O-(O Negative Blood Group)   |                0 |
| O+(O Positive Blood Group)   |                0 |
+------------------------------+------------------+
8 rows in set (0.09 sec)

mysql> delimiter $$
mysql> create procedure get_available_amount(IN id int)
    -> BEGIN
    -> select Amount_Available from available_blood where BloodGroup = (Select BloodGroup from patients where Id = id);
    ->
    -> END $$
Query OK, 0 rows affected (0.42 sec)

mysql> delimiter ;
mysql> select BloodGroup from patients where id=2;
+-------------------------------+
| BloodGroup                    |
+-------------------------------+
| AB+ (AB Positive Blood Group) |
+-------------------------------+
1 row in set (0.00 sec)

mysql> select Amount_Available from available_blood where BloodGroup = (select bloodgroup from patients where id=2);
Empty set (0.13 sec)

mysql> select * from available_blood;
+------------------------------+------------------+
| BloodGroup                   | Amount_Available |
+------------------------------+------------------+
| A-(A Negative Blood Group)   |                0 |
| A+(A Positive Blood Group)   |                7 |
| AB-(AB Negative Blood Group) |                0 |
| AB+(AB Positive Blood Group) |                6 |
| B-(B Negative Blood Group)   |                0 |
| B+(B Positive Blood Group)   |                0 |
| O-(O Negative Blood Group)   |                0 |
| O+(O Positive Blood Group)   |                0 |
+------------------------------+------------------+
8 rows in set (0.00 sec)

mysql> truncate table patients;
ERROR 1701 (42000): Cannot truncate a table referenced in a foreign key constraint (`bloodbankmanagementdb`.`donated`, CONSTRAINT `donated_ibfk_1`)
mysql> truncate patients;
ERROR 1701 (42000): Cannot truncate a table referenced in a foreign key constraint (`bloodbankmanagementdb`.`donated`, CONSTRAINT `donated_ibfk_1`)
mysql> desc patients;
+------------+-------------+------+-----+---------+----------------+
| Field      | Type        | Null | Key | Default | Extra          |
+------------+-------------+------+-----+---------+----------------+
| Id         | int(11)     | NO   | PRI | NULL    | auto_increment |
| Firstname  | varchar(20) | NO   |     | NULL    |                |
| Lastname   | varchar(20) | NO   |     | NULL    |                |
| Gender     | varchar(20) | YES  |     | NULL    |                |
| Age        | int(11)     | NO   |     | NULL    |                |
| Contact    | bigint(20)  | NO   |     | NULL    |                |
| Address    | varchar(20) | NO   |     | NULL    |                |
| BloodGroup | varchar(40) | YES  |     | NULL    |                |
+------------+-------------+------+-----+---------+----------------+
8 rows in set (0.22 sec)

mysql> desc donated;
+----------------+-----------+------+-----+-------------------+-------+
| Field          | Type      | Null | Key | Default           | Extra |
+----------------+-----------+------+-----+-------------------+-------+
| Id             | int(11)   | NO   | MUL | NULL              |       |
| Amount_Donated | int(11)   | NO   |     | NULL              |       |
| created_at     | timestamp | NO   |     | CURRENT_TIMESTAMP |       |
+----------------+-----------+------+-----+-------------------+-------+
3 rows in set (0.13 sec)

mysql> alter table donated
    -> modify Id int not null;
Query OK, 0 rows affected (0.99 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> truncate patients;
ERROR 1701 (42000): Cannot truncate a table referenced in a foreign key constraint (`bloodbankmanagementdb`.`donated`, CONSTRAINT `donated_ibfk_1`)
mysql> desc donated;
+----------------+-----------+------+-----+-------------------+-------+
| Field          | Type      | Null | Key | Default           | Extra |
+----------------+-----------+------+-----+-------------------+-------+
| Id             | int(11)   | NO   | MUL | NULL              |       |
| Amount_Donated | int(11)   | NO   |     | NULL              |       |
| created_at     | timestamp | NO   |     | CURRENT_TIMESTAMP |       |
+----------------+-----------+------+-----+-------------------+-------+
3 rows in set (0.01 sec)

mysql> truncated donated;
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'truncated donated' at line 1
mysql> show tables;
+---------------------------------+
| Tables_in_bloodbankmanagementdb |
+---------------------------------+
| available_blood                 |
| donated                         |
| donors                          |
| donors_backup                   |
| patients                        |
| patients_backup                 |
| patients_taken_blood            |
+---------------------------------+
7 rows in set (0.15 sec)

mysql> desc available_blood;
+------------------+-------------+------+-----+---------+-------+
| Field            | Type        | Null | Key | Default | Extra |
+------------------+-------------+------+-----+---------+-------+
| BloodGroup       | varchar(50) | NO   | PRI | NULL    |       |
| Amount_Available | int(11)     | NO   |     | NULL    |       |
+------------------+-------------+------+-----+---------+-------+
2 rows in set (0.00 sec)

mysql> desc donated;
+----------------+-----------+------+-----+-------------------+-------+
| Field          | Type      | Null | Key | Default           | Extra |
+----------------+-----------+------+-----+-------------------+-------+
| Id             | int(11)   | NO   | MUL | NULL              |       |
| Amount_Donated | int(11)   | NO   |     | NULL              |       |
| created_at     | timestamp | NO   |     | CURRENT_TIMESTAMP |       |
+----------------+-----------+------+-----+-------------------+-------+
3 rows in set (0.00 sec)

mysql> select * from donated;
+----+----------------+---------------------+
| Id | Amount_Donated | created_at          |
+----+----------------+---------------------+
|  2 |              2 | 2019-12-28 19:33:12 |
+----+----------------+---------------------+
1 row in set (0.03 sec)

mysql> drop donated;
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'donated' at line 1
mysql> drop table donated;
Query OK, 0 rows affected (0.98 sec)

mysql> created table donated (Id int not null , Amount_Donated int not null, created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP);
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'created table donated (Id int not null , Amount_Donated int not null, created_at' at line 1
mysql> create table donated (Id int not null , Amount_Donated int not null, created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP);
Query OK, 0 rows affected (1.25 sec)

mysql> truncate patients;
Query OK, 0 rows affected (1.60 sec)

mysql> select * from patients_backup
    -> ;
Empty set (0.11 sec)

mysql> select * from donors;
+----+-----------+----------+--------+-----+------------+------------------+------------------------------+
| Id | Firstname | Lastname | Gender | Age | Contact    | Address          | BloodGroup                   |
+----+-----------+----------+--------+-----+------------+------------------+------------------------------+
|  1 | Sean      | Prescott | Male   |  25 | 7389944397 | 4894 Woodland St | A+(A Positive Blood Group)   |
|  2 | Hailey    | Burke    | Female |  44 | 6067218613 | 8892 Spring St   | A+(A Positive Blood Group)   |
|  3 | Jeremy    | Dixon    | Male   |  26 | 3471626422 | 2514 Dane St     | O-(O Negative Blood Group)   |
|  4 | Gwendolyn | Shelton  | Female |  26 | 4778315960 | 1441 Paddock Way | A-(A Negative Blood Group)   |
|  5 | Sara      | Bennett  | Female |  50 | 7462046952 | 140 W Pecan St   | A+(A Positive Blood Group)   |
|  6 | donor     | donor    | Male   |  42 | 1234564569 | address          | AB+(AB Positive Blood Group) |
+----+-----------+----------+--------+-----+------------+------------------+------------------------------+
6 rows in set (0.04 sec)

mysql> select * from available_blood;
+------------------------------+------------------+
| BloodGroup                   | Amount_Available |
+------------------------------+------------------+
| A-(A Negative Blood Group)   |                0 |
| A+(A Positive Blood Group)   |                7 |
| AB-(AB Negative Blood Group) |                0 |
| AB+(AB Positive Blood Group) |                6 |
| B-(B Negative Blood Group)   |                0 |
| B+(B Positive Blood Group)   |                0 |
| O-(O Negative Blood Group)   |                0 |
| O+(O Positive Blood Group)   |                0 |
+------------------------------+------------------+
8 rows in set (0.87 sec)

mysql> show triggers;
+---------+--------+----------+--------------------------------------------------------------------------------------------------------------------------------------------+--------+------------------------+--------------------------------------------+----------------+----------------------+----------------------+--------------------+
| Trigger | Event  | Table    | Statement                                                                                                                                  | Timing | Created                | sql_mode                                   | Definer        | character_set_client | collation_connection | Database Collation |
+---------+--------+----------+--------------------------------------------------------------------------------------------------------------------------------------------+--------+------------------------+--------------------------------------------+----------------+----------------------+----------------------+--------------------+
| DB      | INSERT | donors   | insert into donors_backup values(new.Id,new.Firstname,new.Lastname,new.Gender,new.Age,new.Contact,new.Address,new.BloodGroup);             | AFTER  | 2019-12-28 22:03:40.50 | STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION | root@localhost | cp850                | cp850_general_ci     | utf8mb4_0900_ai_ci |
| PB      | INSERT | patients | begin
insert into patients_backup values(new.Id,new.Firstname,new.Lastname,new.Gender,new.Age,new.Contact,new.Address,new.BloodGroup);
end | AFTER  | 2019-12-28 22:01:55.88 | STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION | root@localhost | cp850                | cp850_general_ci     | utf8mb4_0900_ai_ci |
+---------+--------+----------+--------------------------------------------------------------------------------------------------------------------------------------------+--------+------------------------+--------------------------------------------+----------------+----------------------+----------------------+--------------------+
2 rows in set (0.05 sec)

mysql> delimiter $$
mysql> create procedure minus_available_amount(In bgroup varchar(20),IN amount int,IN id int)
    -> BEGIN
    -> Update available_blood set Amount_Available=Amount_Available - amount where Bloodgroup = (Select BloodGroup from patients where id =id);
    -> END $$
Query OK, 0 rows affected (0.17 sec)

mysql> delimiter ;
mysql> drop procedure minus_available_amount;
Query OK, 0 rows affected (0.60 sec)

mysql> delimiter $$;
mysql> create procedure minus_available_amount( IN amount int,IN id int)
    -> BEGIN
    -> Update available_blood set Amount_Available=Amount_Available - amount where Bloodgroup = (Select BloodGroup from patients where id =id);
    -> END $$
    -> ^C
mysql> delimiter $$
mysql> create procedure minus_available_amount( IN amount int,IN id int)
    -> BEGIN
    -> Update available_blood set Amount_Available=Amount_Available - amount where Bloodgroup = (Select BloodGroup from patients where id =id);
    -> END $$
Query OK, 0 rows affected (0.26 sec)

mysql> delimiter ;
mysql> show tables;
+---------------------------------+
| Tables_in_bloodbankmanagementdb |
+---------------------------------+
| available_blood                 |
| donated                         |
| donors                          |
| donors_backup                   |
| patients                        |
| patients_backup                 |
| patients_taken_blood            |
+---------------------------------+
7 rows in set (0.15 sec)

mysql> select * frompatients_taken_blood;
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'frompatients_taken_blood' at line 1
mysql> select * from patients_taken_blood;
Empty set (0.11 sec)

mysql> desc patients_taken_blood;
+--------------+-------------+------+-----+-------------------+-------+
| Field        | Type        | Null | Key | Default           | Extra |
+--------------+-------------+------+-----+-------------------+-------+
| Id           | int(11)     | YES  |     | NULL              |       |
| Amount_Taken | varchar(50) | YES  |     | NULL              |       |
| created_at   | timestamp   | YES  |     | CURRENT_TIMESTAMP |       |
+--------------+-------------+------+-----+-------------------+-------+
3 rows in set (0.00 sec)

mysql> create trigger insert_taken_blood_by_patients after update on available_blood for each row
    -> begin
    -> if(new.amount_available < old.amount_available) then
    -> insert into patients_taken_blood values(old.id,(old.amount_available - new.amount_available));
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 4
mysql> delimiter $$
mysql> create trigger insert_taken_blood_by_patients after update on available_blood for each row
    -> begin
    -> if(new.amount_available < old.amount_available) then
    -> insert into patients_taken_blood values(old.id,(old.amount_available - new.amount_available));
    -> end if;
    -> end $$
ERROR 1054 (42S22): Unknown column 'id' in 'OLD'
mysql> delimiter $$
mysql> create trigger insert_taken_blood_by_patients after update on available_blood for each row
    -> begin
    -> if(new.amount_available < old.amount_available) then
    -> insert into patients_taken_blood values(old.id,(old.amount_available - new.amount_available));
    -> if(new.amount_available < old.amount_available) then
    ->
    ->
    ->
    ->
    ->
    ->
    ->
    ->
    ->
    ->
    -> $$
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 5
mysql> delimiter $$
mysql> create trigger insert_taken_blood_by_patients after update on available_blood for each row
    -> begin
    -> if(new.amount_available < old.amount_available) then
    -> insert into patients_taken_blood values(id,(old.amount_available - new.amount_available));
    -> end if;
    -> end $$
Query OK, 0 rows affected (0.46 sec)

mysql> select * from avialable;
    -> $$
ERROR 1146 (42S02): Table 'bloodbankmanagementdb.avialable' doesn't exist
mysql> delimiter ;
mysql> select * from available;
ERROR 1146 (42S02): Table 'bloodbankmanagementdb.available' doesn't exist
mysql> select * from available_blood;
+------------------------------+------------------+
| BloodGroup                   | Amount_Available |
+------------------------------+------------------+
| A-(A Negative Blood Group)   |                0 |
| A+(A Positive Blood Group)   |                7 |
| AB-(AB Negative Blood Group) |                0 |
| AB+(AB Positive Blood Group) |                4 |
| B-(B Negative Blood Group)   |                0 |
| B+(B Positive Blood Group)   |                0 |
| O-(O Negative Blood Group)   |                0 |
| O+(O Positive Blood Group)   |                0 |
+------------------------------+------------------+
8 rows in set (0.11 sec)

mysql> select * from patients_taken_blood;
Empty set (0.02 sec)

mysql> show procedures;
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'procedures' at line 1
mysql> delimiter $$
mysql> create procedure minus_available_amount( IN amount int,IN id int)
    -> BEGIN
    -> Update available_blood set Amount_Available=Amount_Available - amount where Bloodgroup = (Select BloodGroup from patients where id =id);
    -> END $$
ERROR 1304 (42000): PROCEDURE minus_available_amount already exists
mysql> desc minus_available_amount;
    -> $$
ERROR 1146 (42S02): Table 'bloodbankmanagementdb.minus_available_amount' doesn't exist
mysql> select * from available_blood;
    -> $$
+------------------------------+------------------+
| BloodGroup                   | Amount_Available |
+------------------------------+------------------+
| A-(A Negative Blood Group)   |                0 |
| A+(A Positive Blood Group)   |                9 |
| AB-(AB Negative Blood Group) |                0 |
| AB+(AB Positive Blood Group) |                4 |
| B-(B Negative Blood Group)   |                0 |
| B+(B Positive Blood Group)   |                0 |
| O-(O Negative Blood Group)   |                0 |
| O+(O Positive Blood Group)   |                0 |
+------------------------------+------------------+
8 rows in set (0.01 sec)

mysql> show tables;
    -> $$
+---------------------------------+
| Tables_in_bloodbankmanagementdb |
+---------------------------------+
| available_blood                 |
| donated                         |
| donors                          |
| donors_backup                   |
| patients                        |
| patients_backup                 |
| patients_taken_blood            |
+---------------------------------+
7 rows in set (0.07 sec)

mysql> delimiter ;
mysql> select * drom donated;
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'drom donated' at line 1
mysql> select * from donated;
+----+----------------+---------------------+
| Id | Amount_Donated | created_at          |
+----+----------------+---------------------+
|  1 |              2 | 2019-12-29 13:06:31 |
+----+----------------+---------------------+
1 row in set (0.25 sec)

mysql> desc donated;
+----------------+-----------+------+-----+-------------------+-------+
| Field          | Type      | Null | Key | Default           | Extra |
+----------------+-----------+------+-----+-------------------+-------+
| Id             | int(11)   | NO   |     | NULL              |       |
| Amount_Donated | int(11)   | NO   |     | NULL              |       |
| created_at     | timestamp | YES  |     | CURRENT_TIMESTAMP |       |
+----------------+-----------+------+-----+-------------------+-------+
3 rows in set (0.16 sec)

mysql>
mysql> select * from patients_taken_blood;
Empty set (0.02 sec)

mysql> desc patients_taken_blood;
+--------------+-------------+------+-----+-------------------+-------+
| Field        | Type        | Null | Key | Default           | Extra |
+--------------+-------------+------+-----+-------------------+-------+
| Id           | int(11)     | YES  |     | NULL              |       |
| Amount_Taken | varchar(50) | YES  |     | NULL              |       |
| created_at   | timestamp   | YES  |     | CURRENT_TIMESTAMP |       |
+--------------+-------------+------+-----+-------------------+-------+
3 rows in set (0.00 sec)

mysql> show triggers;
+--------------------------------+--------+-----------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+------------------------+--------------------------------------------+----------------+----------------------+----------------------+--------------------+
| Trigger                        | Event  | Table           | Statement                                                                                                                                                          | Timing | Created                | sql_mode                                   | Definer        | character_set_client | collation_connection | Database Collation |
+--------------------------------+--------+-----------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+------------------------+--------------------------------------------+----------------+----------------------+----------------------+--------------------+
| insert_taken_blood_by_patients | UPDATE | available_blood | begin
if(new.amount_available < old.amount_available) then
insert into patients_taken_blood values(id,(old.amount_available - new.amount_available));
end if;
end | AFTER  | 2019-12-29 02:06:13.07 | STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION | root@localhost | cp850                | cp850_general_ci     | utf8mb4_0900_ai_ci |
| DB                             | INSERT | donors          | insert into donors_backup values(new.Id,new.Firstname,new.Lastname,new.Gender,new.Age,new.Contact,new.Address,new.BloodGroup);                                     | AFTER  | 2019-12-28 22:03:40.50 | STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION | root@localhost | cp850                | cp850_general_ci     | utf8mb4_0900_ai_ci |
| PB                             | INSERT | patients        | begin
insert into patients_backup values(new.Id,new.Firstname,new.Lastname,new.Gender,new.Age,new.Contact,new.Address,new.BloodGroup);
end                         | AFTER  | 2019-12-28 22:01:55.88 | STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION | root@localhost | cp850                | cp850_general_ci     | utf8mb4_0900_ai_ci |
+--------------------------------+--------+-----------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+------------------------+--------------------------------------------+----------------+----------------------+----------------------+--------------------+
3 rows in set (0.76 sec)

mysql> select * from donated;
+----+----------------+---------------------+
| Id | Amount_Donated | created_at          |
+----+----------------+---------------------+
|  1 |              2 | 2019-12-29 13:06:31 |
+----+----------------+---------------------+
1 row in set (0.01 sec)

mysql> create trigger insert_donated after update on available_blood for each row
    -> begin
    -> if(new.amount_available>old.amount_available) then
    -> insert into donated values(id,(new.amount_available - old.amount_available));
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 4
mysql> delimiter $$
mysql> create trigger insert_donated after update on available_blood for each row
    -> begin
    -> if(new.amount_available>old.amount_available) then
    -> insert into donated values(id,(new.amount_available - old.amount_available));
    -> end if;
    -> end $$
Query OK, 0 rows affected (0.21 sec)

mysql> select * from donated;
    -> $$
+----+----------------+---------------------+
| Id | Amount_Donated | created_at          |
+----+----------------+---------------------+
|  1 |              2 | 2019-12-29 13:06:31 |
+----+----------------+---------------------+
1 row in set (0.06 sec)

mysql> delimiter ;
mysql> select * from available_amount;
ERROR 1146 (42S02): Table 'bloodbankmanagementdb.available_amount' doesn't exist
mysql> select * from available_blood;
+------------------------------+------------------+
| BloodGroup                   | Amount_Available |
+------------------------------+------------------+
| A-(A Negative Blood Group)   |                0 |
| A+(A Positive Blood Group)   |                9 |
| AB-(AB Negative Blood Group) |                0 |
| AB+(AB Positive Blood Group) |                4 |
| B-(B Negative Blood Group)   |                0 |
| B+(B Positive Blood Group)   |                0 |
| O-(O Negative Blood Group)   |                5 |
| O+(O Positive Blood Group)   |                0 |
+------------------------------+------------------+
8 rows in set (0.11 sec)

mysql> select * from available_blood;
+------------------------------+------------------+
| BloodGroup                   | Amount_Available |
+------------------------------+------------------+
| A-(A Negative Blood Group)   |                0 |
| A+(A Positive Blood Group)   |                9 |
| AB-(AB Negative Blood Group) |                0 |
| AB+(AB Positive Blood Group) |                4 |
| B-(B Negative Blood Group)   |                0 |
| B+(B Positive Blood Group)   |                0 |
| O-(O Negative Blood Group)   |                5 |
| O+(O Positive Blood Group)   |                0 |
+------------------------------+------------------+
8 rows in set (0.00 sec)

mysql> select * from available;
ERROR 1146 (42S02): Table 'bloodbankmanagementdb.available' doesn't exist
mysql> select * from available_blood;
+------------------------------+------------------+
| BloodGroup                   | Amount_Available |
+------------------------------+------------------+
| A-(A Negative Blood Group)   |                0 |
| A+(A Positive Blood Group)   |                9 |
| AB-(AB Negative Blood Group) |                0 |
| AB+(AB Positive Blood Group) |                4 |
| B-(B Negative Blood Group)   |                0 |
| B+(B Positive Blood Group)   |                0 |
| O-(O Negative Blood Group)   |                5 |
| O+(O Positive Blood Group)   |                0 |
+------------------------------+------------------+
8 rows in set (0.01 sec)

mysql> show procedure status;
+-----------------------+-------------------------------------+-----------+---------------------+---------------------+---------------------+---------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------+
| Db                    | Name                                | Type      | Definer             | Modified            | Created             | Security_type | Comment                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | character_set_client | collation_connection | Database Collation |
+-----------------------+-------------------------------------+-----------+---------------------+---------------------+---------------------+---------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------+
| bloodbankmanagementdb | get_available_amount                | PROCEDURE | root@localhost      | 2019-12-29 00:57:34 | 2019-12-29 00:57:34 | DEFINER       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | cp850                | cp850_general_ci     | utf8mb4_0900_ai_ci |
| bloodbankmanagementdb | minus_available_amount              | PROCEDURE | root@localhost      | 2019-12-29 01:56:24 | 2019-12-29 01:56:24 | DEFINER       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | cp850                | cp850_general_ci     | utf8mb4_0900_ai_ci |
| practice_sr           | p11                                 | PROCEDURE | root@localhost      | 2019-12-24 20:20:54 | 2019-12-24 20:20:54 | DEFINER       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | cp850                | cp850_general_ci     | utf8mb4_0900_ai_ci |
| practice_sr           | pp1                                 | PROCEDURE | root@localhost      | 2019-12-24 20:36:18 | 2019-12-24 20:36:18 | DEFINER       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | cp850                | cp850_general_ci     | utf8mb4_0900_ai_ci |
| practice_sr           | pp2                                 | PROCEDURE | root@localhost      | 2019-12-24 21:03:59 | 2019-12-24 21:03:59 | DEFINER       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | cp850                | cp850_general_ci     | utf8mb4_0900_ai_ci |
| sys                   | create_synonym_db                   | PROCEDURE | mysql.sys@localhost | 2019-08-17 21:46:37 | 2019-08-17 21:46:37 | INVOKER       |
 Description

 Takes a source database name and synonym name, and then creates the
 synonym database with views that point to all of the tables within
 the source database.

 Useful for creating a "ps" synonym for "performance_schema",
 or "is" instead of "information_schema", for example.

 Parameters

 in_db_name (VARCHAR(64)):
 The database name that you would like to create a synonym for.
 in_synonym (VARCHAR(64)):
 The database synonym name.

 Example

 mysql> SHOW DATABASES;
 +--------------------+
 | Database           |
 +--------------------+
 | information_schema |
 | mysql              |
 | performance_schema |
 | sys                |
 | test               |
 +--------------------+
 5 rows in set (0.00 sec)

 mysql> CALL sys.create_synonym_db('performance_schema', 'ps');
 +---------------------------------------+
 | summary                               |
 +---------------------------------------+
 | Created 74 views in the `ps` database |
 +---------------------------------------+
 1 row in set (8.57 sec)

 Query OK, 0 rows affected (8.57 sec)

 mysql> SHOW DATABASES;
 +--------------------+
 | Database           |
 +--------------------+
 | information_schema |
 | mysql              |
 | performance_schema |
 | ps                 |
 | sys                |
 | test               |
 +--------------------+
 6 rows in set (0.00 sec)

 mysql> SHOW FULL TABLES FROM ps;
 +------------------------------------------------------+------------+
 | Tables_in_ps                                         | Table_type |
 +------------------------------------------------------+------------+
 | accounts                                             | VIEW       |
 | cond_instances                                       | VIEW       |
 | events_stages_current                                | VIEW       |
 | events_stages_history                                | VIEW       |
 ...
  | utf8mb4              | utf8mb4_0900_ai_ci   | utf8mb4_0900_ai_ci |
| sys                   | diagnostics                         | PROCEDURE | mysql.sys@localhost | 2019-08-17 21:46:37 | 2019-08-17 21:46:37 | INVOKER       |
 Description

 Create a report of the current status of the server for diagnostics purposes. Data collected includes (some items depends on versions and settings):

 * The GLOBAL VARIABLES
 * Several sys schema views including metrics or equivalent (depending on version and settings)
 * Queries in the 95th percentile
 * Several ndbinfo views for MySQL Cluster
 * Replication (both master and slave) information.

 Some of the sys schema views are calculated as initial (optional), overall, delta:

 * The initial view is the content of the view at the start of this procedure.
 This output will be the same as the the start values used for the delta view.
 The initial view is included if @sys.diagnostics.include_raw = 'ON'.
 * The overall view is the content of the view at the end of this procedure.
 This output is the same as the end values used for the delta view.
 The overall view is always included.
 * The delta view is the difference from the beginning to the end. Note that for min and max values
 they are simply the min or max value from the end view respectively, so does not necessarily reflect
 the minimum/maximum value in the monitored period.
 Note: except for the metrics views the delta is only calculation between the first and last outputs.

 Requires the SUPER privilege for "SET sql_log_bin = 0;".

 Versions supported:
 * MySQL 5.6: 5.6.10 and later
 * MySQL 5.7: 5.7.9 and later

 Parameters

 in_max_runtime (INT UNSIGNED):
 The maximum time to keep collecting data.
 Use NULL to get the default which is 60 seconds, otherwise enter a value greater than 0.
 in_interval (INT UNSIGNED):
 How long to sleep between data collections.
 Use NULL to get the default which is 30 seconds, otherwise enter a value greater than 0.
 in_auto_config (ENUM('current', 'medium', 'full'))
 Automatically enable Performance Schema instruments and consumers.
 NOTE: The more that are enabled, the more impact on the performance.
 Supported values are:
 * current - use the current settings.
 * medium - enable some settings. This requires the SUPER privilege.
 * full - enables all settings. This will have a big impact on the
 performance - be careful using this option. This requires
 the SUPER privilege.
 If another setting the 'current' is chosen, the current settings
 are restored at the end of the procedure.


 Configuration Options

 sys.diagnostics.allow_i_s_tables
 Specifies whether it is allowed to do table scan queries on information_schema.TABLES. This can be expensive if there
 are many tables. Set to 'ON' to allow, 'OFF' to not allow.
 Default is 'OFF'.

 sys.diagnostics.include_raw
 Set to 'ON' to include the raw data (e.g. the original output of "SELECT * FROM sys.metrics").
 Use this to get the initial values of the various views.
 Default is 'OFF'.

 sys.statement_truncate_len
 How much of queries in the process list output to include.
 Default is 64.

 sys.debug
 Whether to provide debugging output.
 Default is 'OFF'. Set to 'ON' to include.


 Example

 To create a report and append it to the file diag.out:

 mysql> TEE diag.out;
 mysql> CALL sys.diagnostics(120, 30, 'current');
 ...
 mysql> NOTEE;
  | utf8mb4              | utf8mb4_0900_ai_ci   | utf8mb4_0900_ai_ci |
| sys                   | execute_prepared_stmt               | PROCEDURE | mysql.sys@localhost | 2019-08-17 21:46:37 | 2019-08-17 21:46:37 | INVOKER       |
 Description

 Takes the query in the argument and executes it using a prepared statement. The prepared statement is deallocated,
 so the procedure is mainly useful for executing one off dynamically created queries.

 The sys_execute_prepared_stmt prepared statement name is used for the query and is required not to exist.


 Parameters

 in_query (longtext CHARACTER SET UTF8MB4):
 The query to execute.


 Configuration Options

 sys.debug
 Whether to provide debugging output.
 Default is 'OFF'. Set to 'ON' to include.


 Example

 mysql> CALL sys.execute_prepared_stmt('SELECT * FROM sys.sys_config');
 +------------------------+-------+---------------------+--------+
 | variable               | value | set_time            | set_by |
 +------------------------+-------+---------------------+--------+
 | statement_truncate_len | 64    | 2015-06-30 13:06:00 | NULL   |
 +------------------------+-------+---------------------+--------+
 1 row in set (0.00 sec)

 Query OK, 0 rows affected (0.00 sec)
     | utf8mb4              | utf8mb4_0900_ai_ci   | utf8mb4_0900_ai_ci |
| sys                   | ps_setup_disable_background_threads | PROCEDURE | mysql.sys@localhost | 2019-08-17 21:46:38 | 2019-08-17 21:46:38 | INVOKER       |
 Description

 Disable all background thread instrumentation within Performance Schema.

 Parameters

 None.

 Example

 mysql> CALL sys.ps_setup_disable_background_threads();
 +--------------------------------+
 | summary                        |
 +--------------------------------+
 | Disabled 18 background threads |
 +--------------------------------+
 1 row in set (0.00 sec)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | utf8mb4              | utf8mb4_0900_ai_ci   | utf8mb4_0900_ai_ci |
| sys                   | ps_setup_disable_consumer           | PROCEDURE | mysql.sys@localhost | 2019-08-17 21:46:38 | 2019-08-17 21:46:38 | INVOKER       |
 Description

 Disables consumers within Performance Schema
 matching the input pattern.

 Parameters

 consumer (VARCHAR(128)):
 A LIKE pattern match (using "%consumer%") of consumers to disable

 Example

 To disable all consumers:

 mysql> CALL sys.ps_setup_disable_consumer('');
 +--------------------------+
 | summary                  |
 +--------------------------+
 | Disabled 15 consumers    |
 +--------------------------+
 1 row in set (0.02 sec)

 To disable just the event_stage consumers:

 mysql> CALL sys.ps_setup_disable_comsumers('stage');
 +------------------------+
 | summary                |
 +------------------------+
 | Disabled 3 consumers   |
 +------------------------+
 1 row in set (0.00 sec)
                                                                                                                                                                                                                                                                                                    | utf8mb4              | utf8mb4_0900_ai_ci   | utf8mb4_0900_ai_ci |
| sys                   | ps_setup_disable_instrument         | PROCEDURE | mysql.sys@localhost | 2019-08-17 21:46:38 | 2019-08-17 21:46:38 | INVOKER       |
 Description

 Disables instruments within Performance Schema
 matching the input pattern.

 Parameters

 in_pattern (VARCHAR(128)):
 A LIKE pattern match (using "%in_pattern%") of events to disable

 Example

 To disable all mutex instruments:

 mysql> CALL sys.ps_setup_disable_instrument('wait/synch/mutex');
 +--------------------------+
 | summary                  |
 +--------------------------+
 | Disabled 155 instruments |
 +--------------------------+
 1 row in set (0.02 sec)

 To disable just a specific TCP/IP based network IO instrument:

 mysql> CALL sys.ps_setup_disable_instrument('wait/io/socket/sql/server_tcpip_socket');
 +------------------------+
 | summary                |
 +------------------------+
 | Disabled 1 instruments |
 +------------------------+
 1 row in set (0.00 sec)

 To disable all instruments:

 mysql> CALL sys.ps_setup_disable_instrument('');
 +--------------------------+
 | summary                  |
 +--------------------------+
 | Disabled 547 instruments |
 +--------------------------+
 1 row in set (0.01 sec)
  | utf8mb4              | utf8mb4_0900_ai_ci   | utf8mb4_0900_ai_ci |
| sys                   | ps_setup_disable_thread             | PROCEDURE | mysql.sys@localhost | 2019-08-17 21:46:38 | 2019-08-17 21:46:38 | INVOKER       |
 Description

 Disable the given connection/thread in Performance Schema.

 Parameters

 in_connection_id (BIGINT):
 The connection ID (PROCESSLIST_ID from performance_schema.threads
 or the ID shown within SHOW PROCESSLIST)

 Example

 mysql> CALL sys.ps_setup_disable_thread(3);
 +-------------------+
 | summary           |
 +-------------------+
 | Disabled 1 thread |
 +-------------------+
 1 row in set (0.01 sec)

 To disable the current connection:

 mysql> CALL sys.ps_setup_disable_thread(CONNECTION_ID());
 +-------------------+
 | summary           |
 +-------------------+
 | Disabled 1 thread |
 +-------------------+
 1 row in set (0.00 sec)
                                                                                                                                                                                                                                                                                                                                                                       | utf8mb4              | utf8mb4_0900_ai_ci   | utf8mb4_0900_ai_ci |
| sys                   | ps_setup_enable_background_threads  | PROCEDURE | mysql.sys@localhost | 2019-08-17 21:46:38 | 2019-08-17 21:46:38 | INVOKER       |
 Description

 Enable all background thread instrumentation within Performance Schema.

 Parameters

 None.

 Example

 mysql> CALL sys.ps_setup_enable_background_threads();
 +-------------------------------+
 | summary                       |
 +-------------------------------+
 | Enabled 18 background threads |
 +-------------------------------+
 1 row in set (0.00 sec)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | utf8mb4              | utf8mb4_0900_ai_ci   | utf8mb4_0900_ai_ci |
| sys                   | ps_setup_enable_consumer            | PROCEDURE | mysql.sys@localhost | 2019-08-17 21:46:38 | 2019-08-17 21:46:38 | INVOKER       |
 Description

 Enables consumers within Performance Schema
 matching the input pattern.

 Parameters

 consumer (VARCHAR(128)):
 A LIKE pattern match (using "%consumer%") of consumers to enable

 Example

 To enable all consumers:

 mysql> CALL sys.ps_setup_enable_consumer('');
 +-------------------------+
 | summary                 |
 +-------------------------+
 | Enabled 10 consumers    |
 +-------------------------+
 1 row in set (0.02 sec)

 Query OK, 0 rows affected (0.02 sec)

 To enable just "waits" consumers:

 mysql> CALL sys.ps_setup_enable_consumer('waits');
 +-----------------------+
 | summary               |
 +-----------------------+
 | Enabled 3 consumers   |
 +-----------------------+
 1 row in set (0.00 sec)

 Query OK, 0 rows affected (0.00 sec)
                                                                                                                                                                                                                                             | utf8mb4              | utf8mb4_0900_ai_ci   | utf8mb4_0900_ai_ci |
| sys                   | ps_setup_enable_instrument          | PROCEDURE | mysql.sys@localhost | 2019-08-17 21:46:38 | 2019-08-17 21:46:38 | INVOKER       |
 Description

 Enables instruments within Performance Schema
 matching the input pattern.

 Parameters

 in_pattern (VARCHAR(128)):
 A LIKE pattern match (using "%in_pattern%") of events to enable

 Example

 To enable all mutex instruments:

 mysql> CALL sys.ps_setup_enable_instrument('wait/synch/mutex');
 +-------------------------+
 | summary                 |
 +-------------------------+
 | Enabled 155 instruments |
 +-------------------------+
 1 row in set (0.02 sec)

 Query OK, 0 rows affected (0.02 sec)

 To enable just a specific TCP/IP based network IO instrument:

 mysql> CALL sys.ps_setup_enable_instrument('wait/io/socket/sql/server_tcpip_socket');
 +-----------------------+
 | summary               |
 +-----------------------+
 | Enabled 1 instruments |
 +-----------------------+
 1 row in set (0.00 sec)

 Query OK, 0 rows affected (0.00 sec)

 To enable all instruments:

 mysql> CALL sys.ps_setup_enable_instrument('');
 +-------------------------+
 | summary                 |
 +-------------------------+
 | Enabled 547 instruments |
 +-------------------------+
 1 row in set (0.01 sec)

 Query OK, 0 rows affected (0.01 sec)
  | utf8mb4              | utf8mb4_0900_ai_ci   | utf8mb4_0900_ai_ci |
| sys                   | ps_setup_enable_thread              | PROCEDURE | mysql.sys@localhost | 2019-08-17 21:46:38 | 2019-08-17 21:46:38 | INVOKER       |
 Description

 Enable the given connection/thread in Performance Schema.

 Parameters

 in_connection_id (BIGINT):
 The connection ID (PROCESSLIST_ID from performance_schema.threads
 or the ID shown within SHOW PROCESSLIST)

 Example

 mysql> CALL sys.ps_setup_enable_thread(3);
 +------------------+
 | summary          |
 +------------------+
 | Enabled 1 thread |
 +------------------+
 1 row in set (0.01 sec)

 To enable the current connection:

 mysql> CALL sys.ps_setup_enable_thread(CONNECTION_ID());
 +------------------+
 | summary          |
 +------------------+
 | Enabled 1 thread |
 +------------------+
 1 row in set (0.00 sec)
                                                                                                                                                                                                                                                                                                                                                                                     | utf8mb4              | utf8mb4_0900_ai_ci   | utf8mb4_0900_ai_ci |
| sys                   | ps_setup_reload_saved               | PROCEDURE | mysql.sys@localhost | 2019-08-17 21:46:39 | 2019-08-17 21:46:39 | INVOKER       |
 Description

 Reloads a saved Performance Schema configuration,
 so that you can alter the setup for debugging purposes,
 but restore it to a previous state.

 Use the companion procedure - ps_setup_save(), to
 save a configuration.

 Requires the SUPER privilege for "SET sql_log_bin = 0;".

 Parameters

 None.

 Example

 mysql> CALL sys.ps_setup_save();
 Query OK, 0 rows affected (0.08 sec)

 mysql> UPDATE performance_schema.setup_instruments SET enabled = 'YES', timed = 'YES';
 Query OK, 547 rows affected (0.40 sec)
 Rows matched: 784  Changed: 547  Warnings: 0

 /* Run some tests that need more detailed instrumentation here */

 mysql> CALL sys.ps_setup_reload_saved();
 Query OK, 0 rows affected (0.32 sec)
                                                                                                                                                                                                                                                                                                   | utf8mb4              | utf8mb4_0900_ai_ci   | utf8mb4_0900_ai_ci |
| sys                   | ps_setup_reset_to_default           | PROCEDURE | mysql.sys@localhost | 2019-08-17 21:46:39 | 2019-08-17 21:46:39 | INVOKER       |
 Description

 Resets the Performance Schema setup to the default settings.

 Parameters

 in_verbose (BOOLEAN):
 Whether to print each setup stage (including the SQL) whilst running.

 Example

 mysql> CALL sys.ps_setup_reset_to_default(true)\G
 *************************** 1. row ***************************
 status: Resetting: setup_actors
 DELETE
 FROM performance_schema.setup_actors
 WHERE NOT (HOST = '%' AND USER = '%' AND `ROLE` = '%')
 1 row in set (0.00 sec)

 *************************** 1. row ***************************
 status: Resetting: setup_actors
 INSERT IGNORE INTO performance_schema.setup_actors
 VALUES ('%', '%', '%')
 1 row in set (0.00 sec)
 ...

 mysql> CALL sys.ps_setup_reset_to_default(false)\G
 Query OK, 0 rows affected (0.00 sec)
                                                                                                                                                                                                                                                            | utf8mb4              | utf8mb4_0900_ai_ci   | utf8mb4_0900_ai_ci |
| sys                   | ps_setup_save                       | PROCEDURE | mysql.sys@localhost | 2019-08-17 21:46:39 | 2019-08-17 21:46:39 | INVOKER       |
 Description

 Saves the current configuration of Performance Schema,
 so that you can alter the setup for debugging purposes,
 but restore it to a previous state.

 Use the companion procedure - ps_setup_reload_saved(), to
 restore the saved config.

 The named lock "sys.ps_setup_save" is taken before the
 current configuration is saved. If the attempt to get the named
 lock times out, an error occurs.

 The lock is released after the settings have been restored by
 calling ps_setup_reload_saved().

 Requires the SUPER privilege for "SET sql_log_bin = 0;".

 Parameters

 in_timeout INT
 The timeout in seconds used when trying to obtain the lock.
 A negative timeout means infinite timeout.

 Example

 mysql> CALL sys.ps_setup_save(-1);
 Query OK, 0 rows affected (0.08 sec)

 mysql> UPDATE performance_schema.setup_instruments
 ->    SET enabled = 'YES', timed = 'YES';
 Query OK, 547 rows affected (0.40 sec)
 Rows matched: 784  Changed: 547  Warnings: 0

 /* Run some tests that need more detailed instrumentation here */

 mysql> CALL sys.ps_setup_reload_saved();
 Query OK, 0 rows affected (0.32 sec)
  | utf8mb4              | utf8mb4_0900_ai_ci   | utf8mb4_0900_ai_ci |
| sys                   | ps_setup_show_disabled              | PROCEDURE | mysql.sys@localhost | 2019-08-17 21:46:39 | 2019-08-17 21:46:39 | INVOKER       |
 Description

 Shows all currently disable Performance Schema configuration.

 Disabled users is only available for MySQL 5.7.6 and later.
 In earlier versions it was only possible to enable users.

 Parameters

 in_show_instruments (BOOLEAN):
 Whether to print disabled instruments (can print many items)

 in_show_threads (BOOLEAN):
 Whether to print disabled threads

 Example

 mysql> CALL sys.ps_setup_show_disabled(TRUE, TRUE);
 +----------------------------+
 | performance_schema_enabled |
 +----------------------------+
 |                          1 |
 +----------------------------+
 1 row in set (0.00 sec)

 +--------------------+
 | disabled_users     |
 +--------------------+
 | 'mark'@'localhost' |
 +--------------------+
 1 row in set (0.00 sec)

 +-------------+----------------------+---------+-------+
 | object_type | objects              | enabled | timed |
 +-------------+----------------------+---------+-------+
 | EVENT       | mysql.%              | NO      | NO    |
 | EVENT       | performance_schema.% | NO      | NO    |
 | EVENT       | information_schema.% | NO      | NO    |
 | FUNCTION    | mysql.%              | NO      | NO    |
 | FUNCTION    | performance_schema.% | NO      | NO    |
 | FUNCTION    | information_schema.% | NO      | NO    |
 | PROCEDURE   | mysql.%              | NO      | NO    |
 | PROCEDURE   | performance_schema.% | NO      | NO    |
 | PROCEDURE   | information_schema.% | NO      | NO    |
 | TABLE       | mysql.%              | NO      | NO    |
 | TABLE       | performance_schema.% | NO      | NO    |
 | TABLE       | information_schema.% | NO      | NO    |
 | TRIGGER     | mysql.%              | NO      | NO    |
 | TRIGGER     | performance_schema.% | NO      | NO    |
 | TRIGGER     | information_schema.% | NO      | NO    |
 +-------------+----------------------+---------+-------+
 15 rows in set (0.00 sec)

 +----------------------------------+
 | disabled_consumers               |
 +----------------------------------+
 | events_stages_current            |
 | events_stages_history            |
 | events_stages_history_long       |
 | events_statements_history        |
 | events_statements_history_long   |
 | events_transactions_history      |
 | events_transactions_history_long |
 | events_waits_current             |
 | events_waits_history             |
 | events_waits_history_long        |
 +----------------------------------+
 10 rows in set (0.00 sec)

 Empty set (0.00 sec)

 +---------------------------------------------------------------------------------------+-------+
 | disabled_instruments                                                                  | timed |
 +---------------------------------------------------------------------------------------+-------+
 | wait/synch/mutex/sql/TC_LOG_MMAP::LOCK_tc                                             | NO    |
 | wait/synch/mutex/sql/LOCK_des_key_file                                                | NO    |
 | wait/synch/mutex/sql/MYSQL_BIN_LOG::LOCK_commit                                       | NO    |
 ...
 | memory/sql/servers_cache                                                              | NO    |
 | memory/sql/udf_mem                                                                    | NO    |
 | wait/lock/metadata/sql/mdl                                                            | NO    |
 +---------------------------------------------------------------------------------------+-------+
 547 rows in set (0.00 sec)

 Query OK, 0 rows affected (0.01 sec)
  | utf8mb4              | utf8mb4_0900_ai_ci   | utf8mb4_0900_ai_ci |
| sys                   | ps_setup_show_disabled_consumers    | PROCEDURE | mysql.sys@localhost | 2019-08-17 21:46:39 | 2019-08-17 21:46:39 | INVOKER       |
 Description

 Shows all currently disabled consumers.

 Parameters

 None

 Example

 mysql> CALL sys.ps_setup_show_disabled_consumers();

 +---------------------------+
 | disabled_consumers        |
 +---------------------------+
 | events_statements_current |
 | global_instrumentation    |
 | thread_instrumentation    |
 | statements_digest         |
 +---------------------------+
 4 rows in set (0.05 sec)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | utf8mb4              | utf8mb4_0900_ai_ci   | utf8mb4_0900_ai_ci |
| sys                   | ps_setup_show_disabled_instruments  | PROCEDURE | mysql.sys@localhost | 2019-08-17 21:46:39 | 2019-08-17 21:46:39 | INVOKER       |
 Description

 Shows all currently disabled instruments.

 Parameters

 None

 Example

 mysql> CALL sys.ps_setup_show_disabled_instruments();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | utf8mb4              | utf8mb4_0900_ai_ci   | utf8mb4_0900_ai_ci |
| sys                   | ps_setup_show_enabled               | PROCEDURE | mysql.sys@localhost | 2019-08-17 21:46:39 | 2019-08-17 21:46:39 | INVOKER       |
 Description

 Shows all currently enabled Performance Schema configuration.

 Parameters

 in_show_instruments (BOOLEAN):
 Whether to print enabled instruments (can print many items)

 in_show_threads (BOOLEAN):
 Whether to print enabled threads

 Example

 mysql> CALL sys.ps_setup_show_enabled(TRUE, TRUE);
 +----------------------------+
 | performance_schema_enabled |
 +----------------------------+
 |                          1 |
 +----------------------------+
 1 row in set (0.00 sec)

 +---------------+
 | enabled_users |
 +---------------+
 | '%'@'%'       |
 +---------------+
 1 row in set (0.01 sec)

 +-------------+---------+---------+-------+
 | object_type | objects | enabled | timed |
 +-------------+---------+---------+-------+
 | EVENT       | %.%     | YES     | YES   |
 | FUNCTION    | %.%     | YES     | YES   |
 | PROCEDURE   | %.%     | YES     | YES   |
 | TABLE       | %.%     | YES     | YES   |
 | TRIGGER     | %.%     | YES     | YES   |
 +-------------+---------+---------+-------+
 5 rows in set (0.01 sec)

 +---------------------------+
 | enabled_consumers         |
 +---------------------------+
 | events_statements_current |
 | global_instrumentation    |
 | thread_instrumentation    |
 | statements_digest         |
 +---------------------------+
 4 rows in set (0.05 sec)

 +---------------------------------+-------------+
 | enabled_threads                 | thread_type |
 +---------------------------------+-------------+
 | sql/main                        | BACKGROUND  |
 | sql/thread_timer_notifier       | BACKGROUND  |
 | innodb/io_ibuf_thread           | BACKGROUND  |
 | innodb/io_log_thread            | BACKGROUND  |
 | innodb/io_read_thread           | BACKGROUND  |
 | innodb/io_read_thread           | BACKGROUND  |
 | innodb/io_write_thread          | BACKGROUND  |
 | innodb/io_write_thread          | BACKGROUND  |
 | innodb/page_cleaner_thread      | BACKGROUND  |
 | innodb/srv_lock_timeout_thread  | BACKGROUND  |
 | innodb/srv_error_monitor_thread | BACKGROUND  |
 | innodb/srv_monitor_thread       | BACKGROUND  |
 | innodb/srv_master_thread        | BACKGROUND  |
 | innodb/srv_purge_thread         | BACKGROUND  |
 | innodb/srv_worker_thread        | BACKGROUND  |
 | innodb/srv_worker_thread        | BACKGROUND  |
 | innodb/srv_worker_thread        | BACKGROUND  |
 | innodb/buf_dump_thread          | BACKGROUND  |
 | innodb/dict_stats_thread        | BACKGROUND  |
 | sql/signal_handler              | BACKGROUND  |
 | sql/compress_gtid_table         | FOREGROUND  |
 | root@localhost                  | FOREGROUND  |
 +---------------------------------+-------------+
 22 rows in set (0.01 sec)

 +-------------------------------------+-------+
 | enabled_instruments                 | timed |
 +-------------------------------------+-------+
 | wait/io/file/sql/map                | YES   |
 | wait/io/file/sql/binlog             | YES   |
 ...
 | statement/com/Error                 | YES   |
 | statement/com/                      | YES   |
 | idle                                | YES   |
 +-------------------------------------+-------+
 210 rows in set (0.08 sec)

 Query OK, 0 rows affected (0.89 sec)
  | utf8mb4              | utf8mb4_0900_ai_ci   | utf8mb4_0900_ai_ci |
| sys                   | ps_setup_show_enabled_consumers     | PROCEDURE | mysql.sys@localhost | 2019-08-17 21:46:39 | 2019-08-17 21:46:39 | INVOKER       |
 Description

 Shows all currently enabled consumers.

 Parameters

 None

 Example

 mysql> CALL sys.ps_setup_show_enabled_consumers();

 +---------------------------+
 | enabled_consumers         |
 +---------------------------+
 | events_statements_current |
 | global_instrumentation    |
 | thread_instrumentation    |
 | statements_digest         |
 +---------------------------+
 4 rows in set (0.05 sec)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | utf8mb4              | utf8mb4_0900_ai_ci   | utf8mb4_0900_ai_ci |
| sys                   | ps_setup_show_enabled_instruments   | PROCEDURE | mysql.sys@localhost | 2019-08-17 21:46:39 | 2019-08-17 21:46:39 | INVOKER       |
 Description

 Shows all currently enabled instruments.

 Parameters

 None

 Example

 mysql> CALL sys.ps_setup_show_enabled_instruments();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | utf8mb4              | utf8mb4_0900_ai_ci   | utf8mb4_0900_ai_ci |
| sys                   | ps_statement_avg_latency_histogram  | PROCEDURE | mysql.sys@localhost | 2019-08-17 21:46:37 | 2019-08-17 21:46:37 | INVOKER       |
 Description

 Outputs a textual histogram graph of the average latency values
 across all normalized queries tracked within the Performance Schema
 events_statements_summary_by_digest table.

 Can be used to show a very high level picture of what kind of
 latency distribution statements running within this instance have.

 Parameters

 None.

 Example

 mysql> CALL sys.ps_statement_avg_latency_histogram()\G
 *************************** 1. row ***************************
 Performance Schema Statement Digest Average Latency Histogram:

 . = 1 unit
 * = 2 units
 # = 3 units

 (0 - 38ms)     240 | ################################################################################
 (38 - 77ms)    38  | ......................................
 (77 - 115ms)   3   | ...
 (115 - 154ms)  62  | *******************************
 (154 - 192ms)  3   | ...
 (192 - 231ms)  0   |
 (231 - 269ms)  0   |
 (269 - 307ms)  0   |
 (307 - 346ms)  0   |
 (346 - 384ms)  1   | .
 (384 - 423ms)  1   | .
 (423 - 461ms)  0   |
 (461 - 499ms)  0   |
 (499 - 538ms)  0   |
 (538 - 576ms)  0   |
 (576 - 615ms)  1   | .

 Total Statements: 350; Buckets: 16; Bucket Size: 38 ms;
  | utf8mb4              | utf8mb4_0900_ai_ci   | utf8mb4_0900_ai_ci |
| sys                   | ps_trace_statement_digest           | PROCEDURE | mysql.sys@localhost | 2019-08-17 21:46:38 | 2019-08-17 21:46:38 | INVOKER       |
 Description

 Traces all instrumentation within Performance Schema for a specific
 Statement Digest.

 When finding a statement of interest within the
 performance_schema.events_statements_summary_by_digest table, feed
 the DIGEST value in to this procedure, set how long to poll for,
 and at what interval to poll, and it will generate a report of all
 statistics tracked within Performance Schema for that digest for the
 interval.

 It will also attempt to generate an EXPLAIN for the longest running
 example of the digest during the interval. Note this may fail, as:

 * Performance Schema truncates long SQL_TEXT values (and hence the
 EXPLAIN will fail due to parse errors)
 * the default schema is sys (so tables that are not fully qualified
 in the query may not be found)
 * some queries such as SHOW are not supported in EXPLAIN.

 When the EXPLAIN fails, the error will be ignored and no EXPLAIN
 output generated.

 Requires the SUPER privilege for "SET sql_log_bin = 0;".

 Parameters

 in_digest (VARCHAR(64)):
 The statement digest identifier you would like to analyze
 in_runtime (INT):
 The number of seconds to run analysis for
 in_interval (DECIMAL(2,2)):
 The interval (in seconds, may be fractional) at which to try
 and take snapshots
 in_start_fresh (BOOLEAN):
 Whether to TRUNCATE the events_statements_history_long and
 events_stages_history_long tables before starting
 in_auto_enable (BOOLEAN):
 Whether to automatically turn on required consumers

 Example

 mysql> call ps_trace_statement_digest('891ec6860f98ba46d89dd20b0c03652c', 10, 0.1, true, true);
 +--------------------+
 | SUMMARY STATISTICS |
 +--------------------+
 | SUMMARY STATISTICS |
 +--------------------+
 1 row in set (9.11 sec)

 +------------+-----------+-----------+-----------+---------------+------------+------------+
 | executions | exec_time | lock_time | rows_sent | rows_examined | tmp_tables | full_scans |
 +------------+-----------+-----------+-----------+---------------+------------+------------+
 |         21 | 4.11 ms   | 2.00 ms   |         0 |            21 |          0 |          0 |
 +------------+-----------+-----------+-----------+---------------+------------+------------+
 1 row in set (9.11 sec)

 +------------------------------------------+-------+-----------+
 | event_name                               | count | latency   |
 +------------------------------------------+-------+-----------+
 | stage/sql/checking query cache for query |    16 | 724.37 us |
 | stage/sql/statistics                     |    16 | 546.92 us |
 | stage/sql/freeing items                  |    18 | 520.11 us |
 | stage/sql/init                           |    51 | 466.80 us |
 ...
 | stage/sql/cleaning up                    |    18 | 11.92 us  |
 | stage/sql/executing                      |    16 | 6.95 us   |
 +------------------------------------------+-------+-----------+
 17 rows in set (9.12 sec)

 +---------------------------+
 | LONGEST RUNNING STATEMENT |
 +---------------------------+
 | LONGEST RUNNING STATEMENT |
 +---------------------------+
 1 row in set (9.16 sec)

 +-----------+-----------+-----------+-----------+---------------+------------+-----------+
 | thread_id | exec_time | lock_time | rows_sent | rows_examined | tmp_tables | full_scan |
 +-----------+-----------+-----------+-----------+---------------+------------+-----------+
 |    166646 | 618.43 us | 1.00 ms   |         0 |             1 |          0 |         0 |
 +-----------+-----------+-----------+-----------+---------------+------------+-----------+
 1 row in set (9.16 sec)

 // Truncated for clarity...
 +-----------------------------------------------------------------+
 | sql_text                                                        |
 +-----------------------------------------------------------------+
 | select hibeventhe0_.id as id1382_, hibeventhe0_.createdTime ... |
 +-----------------------------------------------------------------+
 1 row in set (9.17 sec)

 +------------------------------------------+-----------+
 | event_name                               | latency   |
 +------------------------------------------+-----------+
 | stage/sql/init                           | 8.61 us   |
 | stage/sql/Waiting for query cache lock   | 453.23 us |
 | stage/sql/init                           | 331.07 ns |
 | stage/sql/checking query cache for query | 43.04 us  |
 ...
 | stage/sql/freeing items                  | 30.46 us  |
 | stage/sql/cleaning up                    | 662.13 ns |
 +------------------------------------------+-----------+
 18 rows in set (9.23 sec)

 +----+-------------+--------------+-------+---------------+-----------+---------+-------------+------+-------+
 | id | select_type | table        | type  | possible_keys | key       | key_len | ref         | rows | Extra |
 +----+-------------+--------------+-------+---------------+-----------+---------+-------------+------+-------+
 |  1 | SIMPLE      | hibeventhe0_ | const | fixedTime     | fixedTime | 775     | const,const |    1 | NULL  |
 +----+-------------+--------------+-------+---------------+-----------+---------+-------------+------+-------+
 1 row in set (9.27 sec)

 Query OK, 0 rows affected (9.28 sec)
  | utf8mb4              | utf8mb4_0900_ai_ci   | utf8mb4_0900_ai_ci |
| sys                   | ps_trace_thread                     | PROCEDURE | mysql.sys@localhost | 2019-08-17 21:46:38 | 2019-08-17 21:46:38 | INVOKER       |
 Description

 Dumps all data within Performance Schema for an instrumented thread,
 to create a DOT formatted graph file.

 Each resultset returned from the procedure should be used for a complete graph

 Requires the SUPER privilege for "SET sql_log_bin = 0;".

 Parameters

 in_thread_id (BIGINT UNSIGNED):
 The thread that you would like a stack trace for
 in_outfile  (VARCHAR(255)):
 The filename the dot file will be written to
 in_max_runtime (DECIMAL(20,2)):
 The maximum time to keep collecting data.
 Use NULL to get the default which is 60 seconds.
 in_interval (DECIMAL(20,2)):
 How long to sleep between data collections.
 Use NULL to get the default which is 1 second.
 in_start_fresh (BOOLEAN):
 Whether to reset all Performance Schema data before tracing.
 in_auto_setup (BOOLEAN):
 Whether to disable all other threads and enable all consumers/instruments.
 This will also reset the settings at the end of the run.
 in_debug (BOOLEAN):
 Whether you would like to include file:lineno in the graph

 Example

 mysql> CALL sys.ps_trace_thread(25, CONCAT('/tmp/stack-', REPLACE(NOW(), ' ', '-'), '.dot'), NULL, NULL, TRUE, TRUE, TRUE);
 +-------------------+
 | summary           |
 +-------------------+
 | Disabled 1 thread |
 +-------------------+
 1 row in set (0.00 sec)

 +---------------------------------------------+
 | Info                                        |
 +---------------------------------------------+
 | Data collection starting for THREAD_ID = 25 |
 +---------------------------------------------+
 1 row in set (0.03 sec)

 +-----------------------------------------------------------+
 | Info                                                      |
 +-----------------------------------------------------------+
 | Stack trace written to /tmp/stack-2014-02-16-21:18:41.dot |
 +-----------------------------------------------------------+
 1 row in set (60.07 sec)

 +-------------------------------------------------------------------+
 | Convert to PDF                                                    |
 +-------------------------------------------------------------------+
 | dot -Tpdf -o /tmp/stack_25.pdf /tmp/stack-2014-02-16-21:18:41.dot |
 +-------------------------------------------------------------------+
 1 row in set (60.07 sec)

 +-------------------------------------------------------------------+
 | Convert to PNG                                                    |
 +-------------------------------------------------------------------+
 | dot -Tpng -o /tmp/stack_25.png /tmp/stack-2014-02-16-21:18:41.dot |
 +-------------------------------------------------------------------+
 1 row in set (60.07 sec)

 +------------------+
 | summary          |
 +------------------+
 | Enabled 1 thread |
 +------------------+
 1 row in set (60.32 sec)
  | utf8mb4              | utf8mb4_0900_ai_ci   | utf8mb4_0900_ai_ci |
| sys                   | ps_truncate_all_tables              | PROCEDURE | mysql.sys@localhost | 2019-08-17 21:46:39 | 2019-08-17 21:46:39 | INVOKER       |
 Description

 Truncates all summary tables within Performance Schema,
 resetting all aggregated instrumentation as a snapshot.

 Parameters

 in_verbose (BOOLEAN):
 Whether to print each TRUNCATE statement before running

 Example

 mysql> CALL sys.ps_truncate_all_tables(false);
 +---------------------+
 | summary             |
 +---------------------+
 | Truncated 44 tables |
 +---------------------+
 1 row in set (0.10 sec)

 Query OK, 0 rows affected (0.10 sec)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | utf8mb4              | utf8mb4_0900_ai_ci   | utf8mb4_0900_ai_ci |
| sys                   | statement_performance_analyzer      | PROCEDURE | mysql.sys@localhost | 2019-08-17 21:46:39 | 2019-08-17 21:46:39 | INVOKER       |
 Description

 Create a report of the statements running on the server.

 The views are calculated based on the overall and/or delta activity.

 Requires the SUPER privilege for "SET sql_log_bin = 0;".

 Parameters

 in_action (ENUM('snapshot', 'overall', 'delta', 'create_tmp', 'create_table', 'save', 'cleanup')):
 The action to take. Supported actions are:
 * snapshot      Store a snapshot. The default is to make a snapshot of the current content of
 performance_schema.events_statements_summary_by_digest, but by setting in_table
 this can be overwritten to copy the content of the specified table.
 The snapshot is stored in the sys.tmp_digests temporary table.
 * overall       Generate analyzis based on the content specified by in_table. For the overall analyzis,
 in_table can be NOW() to use a fresh snapshot. This will overwrite an existing snapshot.
 Use NULL for in_table to use the existing snapshot. If in_table IS NULL and no snapshot
 exists, a new will be created.
 See also in_views and @sys.statement_performance_analyzer.limit.
 * delta         Generate a delta analysis. The delta will be calculated between the reference table in
 in_table and the snapshot. An existing snapshot must exist.
 The action uses the sys.tmp_digests_delta temporary table.
 See also in_views and @sys.statement_performance_analyzer.limit.
 * create_table  Create a regular table suitable for storing the snapshot for later use, e.g. for
 calculating deltas.
 * create_tmp    Create a temporary table suitable for storing the snapshot for later use, e.g. for
 calculating deltas.
 * save          Save the snapshot in the table specified by in_table. The table must exists and have
 the correct structure.
 If no snapshot exists, a new is created.
 * cleanup       Remove the temporary tables used for the snapshot and delta.

 in_table (VARCHAR(129)):
 The table argument used for some actions. Use the format 'db1.t1' or 't1' without using any backticks (`)
 for quoting. Periods (.) are not supported in the database and table names.

 The meaning of the table for each action supporting the argument is:

 * snapshot      The snapshot is created based on the specified table. Set to NULL or NOW() to use
 the current content of performance_schema.events_statements_summary_by_digest.
 * overall       The table with the content to create the overall analyzis for. The following values
 can be used:
 - A table name - use the content of that table.
 - NOW()        - create a fresh snapshot and overwrite the existing snapshot.
 - NULL         - use the last stored snapshot.
 * delta         The table name is mandatory and specified the reference view to compare the currently
 stored snapshot against. If no snapshot exists, a new will be created.
 * create_table  The name of the regular table to create.
 * create_tmp    The name of the temporary table to create.
 * save          The name of the table to save the currently stored snapshot into.

 in_views (SET ('with_runtimes_in_95th_percentile', 'analysis', 'with_errors_or_warnings',
 'with_full_table_scans', 'with_sorting', 'with_temp_tables', 'custom'))
 Which views to include:  * with_runtimes_in_95th_percentile  Based on the sys.statements_with_runtimes_in_95th_percentile view * analysis                          Based on the sys.statement_analysis view * with_errors_or_warnings           Based on the sys.statements_with_errors_or_warnings view * with_full_table_scans             Based on the sys.statements_with_full_table_scans view * with_sorting                      Based on the sys.statements_with_sorting view * with_temp_tables                  Based on the sys.statements_with_temp_tables view * custom                            Use a custom view. This view must be specified in @sys.statement_performance_analyzer.view to an existing view or a query  Default is to include all except 'custom'.   Configuration Options  sys.statement_performance_analyzer.limit The maximum number of rows to include for the views that does not have a built-in limit (e.g. the 95th percentile view). If not set the limit is 100.  sys.statement_performance_analyzer.view Used together with the 'custom' view. If the value contains a space, it is considered a query, otherwise it must be an existing view querying the performance_schema.events_statements_summary_by_digest table. There cannot be any limit clause including in the query or view definition if @sys.statement_performance_analyzer.limit > 0. If specifying a view, use the same format as for in_table.  sys.debug Whether to provide debugging output. Default is 'OFF'. Set to 'ON' to include.   Example  To create a report with the queries in the 95th percentile since last truncate of performance_schema.events_statements_summary_by_digest and the delta for a 1 minute period:  1. Create a temporary table to store the initial snapshot. 2. Create the initial snapshot. 3. Save the initial snapshot in the temporary table. 4. Wait one minute. 5. Create a new snapshot. 6. Perform analyzis based on the new snapshot. 7. Perform analyzis based on the delta between the initial and new snapshots.  mysql> CALL sys.statement_performance_analyzer('create_tmp', 'mydb.tmp_digests_ini', NULL); Query OK, 0 rows affected (0.08 sec)  mysql> CALL sys.statement_performance_analyzer('snapshot', NULL, NULL); Query OK, 0 rows affected (0.02 sec)  mysql> CALL sys.statement_performance_analyzer('save', 'mydb.tmp_digests_ini', NULL); Query OK, 0 rows affected (0.00 sec)  mysql> DO SLEEP(60); Query OK, 0 rows affected (1 min 0.00 sec)  mysql> CALL sys.statement_performance_analyzer('snapshot', NULL, NULL); Query OK, 0 rows affected (0.02 sec)  mysql> CALL sys.statement_performance_analyzer('overall', NULL, 'with_runtimes_in_95th_percentile'); +-----------------------------------------+ | Next Output                             | +-----------------------------------------+ | Queries with Runtime in 95th Percentile | +-----------------------------------------+ 1 row in set (0.05 sec)  ...  mysql> CALL sys.statement_performance_analyzer('delta', 'mydb.tmp_digests_ini', 'with_runtimes_in_95th_percentile'); +-----------------------------------------+ | Next Output                             | +-----------------------------------------+ | Queries with Runtime in 95th Percentile | +-----------------------------------------+ 1 row in set (0.03 sec)  ...   To create an overall report of the 95th percentile queries and the top 10 queries with full table scans:  mysql> CALL sys.statement_performance_analyzer('snapshot', NULL, NULL); Query OK, 0 rows affected (0.01 sec)  mysql> SET @sys.statement_performance_analyzer.limit = 10; Query OK, 0 rows affected (0.00 sec)  mysql> CALL sys.statement_performance_analyzer('overall', NULL, 'with_runtimes_in_95th_percentile,with_full_table_scans'); +-----------------------------------------+ | Next Output                             | +-----------------------------------------+ | Queries with Runtime in 95th Percentile | +-----------------------------------------+ 1 row in set (0.01 sec)  ...  +-------------------------------------+ | Next Output                         | +-------------------------------------+ | Top 10 Queries with Full Table Scan | +-------------------------------------+ 1 row in set (0.09 sec)  ...   Use a custom view showing the top 10 query sorted by total execution time refreshing the view every minute using the watch command in Linux.  mysql> CREATE OR REPLACE VIEW mydb.my_statements AS -> SELECT sys.format_statement(DIGEST_TEXT) AS query, ->        SCHEMA_NAME AS db, ->        COUNT_STAR AS exec_count, ->        sys.format_time(SUM_TIMER_WAIT) AS total_latency, ->        sys.format_time(AVG_TIMER_WAIT) AS avg_latency, ->        ROUND(IFNULL(SUM_ROWS_SENT / NULLIF(COUNT_STAR, 0), 0)) AS rows_sent_avg, ->        ROUND(IFNULL(SUM_ROWS_EXAMINED / NULLIF(COUNT_STAR, 0), 0)) AS rows_examined_avg, ->        ROUND(IFNULL(SUM_ROWS_AFFECTED / NULLIF(COUNT_STAR, 0), 0)) AS rows_affected_avg, ->        DIGEST AS digest ->   FROM performance_schema.events_statements_summary_by_digest -> ORDER BY SUM_TIMER_WAIT DESC; Query OK, 0 rows affected (0.01 sec)  mysql> CALL sys.statement_performance_analyzer('create_table', 'mydb.digests_prev', NULL); Query OK, 0 rows affected (0.10 sec)  shell$ watch -n 60 "mysql sys --table -e " > SET @sys.statement_performance_analyzer.view = 'mydb.my_statements'; > SET @sys.statement_performance_analyzer.limit = 10; > CALL statement_performance_analyzer('snapshot', NULL, NULL); > CALL statement_performance_analyzer('delta', 'mydb.digests_prev', 'custom'); > CALL statement_performance_analyzer('save', 'mydb.digests_prev', NULL); > ""  Every 60.0s: mysql sys --table -e "                                                                                                   ...  Mon Dec 22 10:58:51 2014  +----------------------------------+ | Next Output                      | +----------------------------------+ | Top 10 Queries Using Custom View | +----------------------------------+ +-------------------+-------+------------+---------------+-------------+---------------+-------------------+-------------------+----------------------------------+ | query             | db    | exec_count | total_latency | avg_latency | rows_sent_avg | rows_examined_avg | rows_affected_avg | digest                           | +-------------------+-------+------------+---------------+-------------+---------------+-------------------+-------------------+----------------------------------+ ...  | utf8mb4              | utf8mb4_0900_ai_ci   | utf8mb4_0900_ai_ci |
| sys                   | table_exists                        | PROCEDURE | mysql.sys@localhost | 2019-08-17 21:46:40 | 2019-08-17 21:46:40 | INVOKER       |
 Description

 Tests whether the table specified in in_db and in_table exists either as a regular
 table, or as a temporary table. The returned value corresponds to the table that
 will be used, so if there's both a temporary and a permanent table with the given
 name, then 'TEMPORARY' will be returned.

 Parameters

 in_db (VARCHAR(64)):
 The database name to check for the existance of the table in.

 in_table (VARCHAR(64)):
 The name of the table to check the existance of.

 out_exists ENUM('', 'BASE TABLE', 'VIEW', 'TEMPORARY'):
 The return value: whether the table exists. The value is one of:
 * ''           - the table does not exist neither as a base table, view, nor temporary table.
 * 'BASE TABLE' - the table name exists as a permanent base table table.
 * 'VIEW'       - the table name exists as a view.
 * 'TEMPORARY'  - the table name exists as a temporary table.

 Example

 mysql> CREATE DATABASE db1;
 Query OK, 1 row affected (0.07 sec)

 mysql> use db1;
 Database changed
 mysql> CREATE TABLE t1 (id INT PRIMARY KEY);
 Query OK, 0 rows affected (0.08 sec)

 mysql> CREATE TABLE t2 (id INT PRIMARY KEY);
 Query OK, 0 rows affected (0.08 sec)

 mysql> CREATE view v_t1 AS SELECT * FROM t1;
 Query OK, 0 rows affected (0.00 sec)

 mysql> CREATE TEMPORARY TABLE t1 (id INT PRIMARY KEY);
 Query OK, 0 rows affected (0.00 sec)

 mysql> CALL sys.table_exists('db1', 't1', @exists); SELECT @exists;
 Query OK, 0 rows affected (0.00 sec)

 +------------+
 | @exists    |
 +------------+
 | TEMPORARY  |
 +------------+
 1 row in set (0.00 sec)

 mysql> CALL sys.table_exists('db1', 't2', @exists); SELECT @exists;
 Query OK, 0 rows affected (0.00 sec)

 +------------+
 | @exists    |
 +------------+
 | BASE TABLE |
 +------------+
 1 row in set (0.01 sec)

 mysql> CALL sys.table_exists('db1', 'v_t1', @exists); SELECT @exists;
 Query OK, 0 rows affected (0.00 sec)

 +---------+
 | @exists |
 +---------+
 | VIEW    |
 +---------+
 1 row in set (0.00 sec)

 mysql> CALL sys.table_exists('db1', 't3', @exists); SELECT @exists;
 Query OK, 0 rows affected (0.01 sec)

 +---------+
 | @exists |
 +---------+
 |         |
 +---------+
 1 row in set (0.00 sec)
  | utf8mb4              | utf8mb4_0900_ai_ci   | utf8mb4_0900_ai_ci |
| thane12oct            | p20                                 | PROCEDURE | root@localhost      | 2019-10-12 21:18:42 | 2019-10-12 21:18:42 | DEFINER       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | cp850                | cp850_general_ci     | utf8mb4_0900_ai_ci |
| thane21sep            | p1                                  | PROCEDURE | root@localhost      | 2019-09-21 18:44:19 | 2019-09-21 18:44:19 | DEFINER       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | cp850                | cp850_general_ci     | utf8mb4_0900_ai_ci |
| thane21sep            | p10                                 | PROCEDURE | root@localhost      | 2019-09-21 19:56:33 | 2019-09-21 19:56:33 | DEFINER       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | cp850                | cp850_general_ci     | utf8mb4_0900_ai_ci |
| thane21sep            | p2                                  | PROCEDURE | root@localhost      | 2019-09-21 18:57:32 | 2019-09-21 18:57:32 | DEFINER       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | cp850                | cp850_general_ci     | utf8mb4_0900_ai_ci |
| thane21sep            | p3                                  | PROCEDURE | root@localhost      | 2019-09-21 19:06:03 | 2019-09-21 19:06:03 | DEFINER       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | cp850                | cp850_general_ci     | utf8mb4_0900_ai_ci |
| thane21sep            | p4                                  | PROCEDURE | root@localhost      | 2019-09-21 19:18:44 | 2019-09-21 19:18:44 | DEFINER       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | cp850                | cp850_general_ci     | utf8mb4_0900_ai_ci |
| thane21sep            | p5                                  | PROCEDURE | root@localhost      | 2019-09-21 19:24:43 | 2019-09-21 19:24:43 | DEFINER       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | cp850                | cp850_general_ci     | utf8mb4_0900_ai_ci |
| thane21sep            | p6                                  | PROCEDURE | root@localhost      | 2019-09-21 19:31:53 | 2019-09-21 19:31:53 | DEFINER       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | cp850                | cp850_general_ci     | utf8mb4_0900_ai_ci |
| thane21sep            | p7                                  | PROCEDURE | root@localhost      | 2019-09-21 19:41:20 | 2019-09-21 19:41:20 | DEFINER       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | cp850                | cp850_general_ci     | utf8mb4_0900_ai_ci |
| thane21sep            | p8                                  | PROCEDURE | root@localhost      | 2019-09-21 19:45:44 | 2019-09-21 19:45:44 | DEFINER       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | cp850                | cp850_general_ci     | utf8mb4_0900_ai_ci |
| thane21sep            | p9                                  | PROCEDURE | root@localhost      | 2019-09-21 19:50:23 | 2019-09-21 19:50:23 | DEFINER       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | cp850                | cp850_general_ci     | utf8mb4_0900_ai_ci |
| thane5oct             | p1                                  | PROCEDURE | root@localhost      | 2019-10-05 20:18:03 | 2019-10-05 20:18:03 | DEFINER       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | cp850                | cp850_general_ci     | utf8mb4_0900_ai_ci |
| thane5oct             | p4                                  | PROCEDURE | root@localhost      | 2019-10-05 20:44:14 | 2019-10-05 20:44:14 | DEFINER       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | cp850                | cp850_general_ci     | utf8mb4_0900_ai_ci |
| thane5oct             | p6                                  | PROCEDURE | root@localhost      | 2019-10-05 21:04:25 | 2019-10-05 21:04:25 | DEFINER       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | cp850                | cp850_general_ci     | utf8mb4_0900_ai_ci |
| thane5oct             | p7                                  | PROCEDURE | root@localhost      | 2019-10-05 21:09:00 | 2019-10-05 21:09:00 | DEFINER       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | cp850                | cp850_general_ci     | utf8mb4_0900_ai_ci |
+-----------------------+-------------------------------------+-----------+---------------------+---------------------+---------------------+---------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------+
46 rows in set (0.46 sec)

mysql> ^C
mysql> show procedure status where db = bloodbankmanagementdb;
ERROR 1054 (42S22): Unknown column 'bloodbankmanagementdb' in 'where clause'
mysql> show procedure status where db = 'bloodbankmanagementdb';
+-----------------------+------------------------+-----------+----------------+---------------------+---------------------+---------------+---------+----------------------+----------------------+--------------------+
| Db                    | Name                   | Type      | Definer        | Modified            | Created             | Security_type | Comment | character_set_client | collation_connection | Database Collation |
+-----------------------+------------------------+-----------+----------------+---------------------+---------------------+---------------+---------+----------------------+----------------------+--------------------+
| bloodbankmanagementdb | get_available_amount   | PROCEDURE | root@localhost | 2019-12-29 00:57:34 | 2019-12-29 00:57:34 | DEFINER       |         | cp850                | cp850_general_ci     | utf8mb4_0900_ai_ci |
| bloodbankmanagementdb | minus_available_amount | PROCEDURE | root@localhost | 2019-12-29 01:56:24 | 2019-12-29 01:56:24 | DEFINER       |         | cp850                | cp850_general_ci     | utf8mb4_0900_ai_ci |
+-----------------------+------------------------+-----------+----------------+---------------------+---------------------+---------------+---------+----------------------+----------------------+--------------------+
2 rows in set (0.01 sec)

mysql> update available_blood set amount_available=amount_available+11 where bloodgroup=(select bloodgroup from donors where id=6);
ERROR 1136 (21S01): Column count doesn't match value count at row 1
mysql> desc amount_available;
ERROR 1146 (42S02): Table 'bloodbankmanagementdb.amount_available' doesn't exist
mysql> desc available_blood;
+------------------+-------------+------+-----+---------+-------+
| Field            | Type        | Null | Key | Default | Extra |
+------------------+-------------+------+-----+---------+-------+
| BloodGroup       | varchar(50) | NO   | PRI | NULL    |       |
| Amount_Available | int(11)     | NO   |     | NULL    |       |
+------------------+-------------+------+-----+---------+-------+
2 rows in set (0.18 sec)

mysql> select bloodgroup from donors where id=6;
+------------------------------+
| bloodgroup                   |
+------------------------------+
| AB+(AB Positive Blood Group) |
+------------------------------+
1 row in set (0.00 sec)

mysql> select * from available_blod;
ERROR 1146 (42S02): Table 'bloodbankmanagementdb.available_blod' doesn't exist
mysql> select * from available_blood;
+------------------------------+------------------+
| BloodGroup                   | Amount_Available |
+------------------------------+------------------+
| A-(A Negative Blood Group)   |                0 |
| A+(A Positive Blood Group)   |                9 |
| AB-(AB Negative Blood Group) |                0 |
| AB+(AB Positive Blood Group) |                4 |
| B-(B Negative Blood Group)   |                0 |
| B+(B Positive Blood Group)   |                0 |
| O-(O Negative Blood Group)   |                5 |
| O+(O Positive Blood Group)   |                0 |
+------------------------------+------------------+
8 rows in set (0.03 sec)

mysql> update available_blood set amount_available=amount_available+11 where bloodgroup=(select bloodgroup from donors where id=6);
ERROR 1136 (21S01): Column count doesn't match value count at row 1
mysql> update available_blood set amount_available=amount_available+11 where bloodgroup='AB+(AB Positive Blood Group)';
ERROR 1136 (21S01): Column count doesn't match value count at row 1
mysql> select available_amount from available_blood where bloodgroup='AB+(AB Positive Blood Group)';
ERROR 1054 (42S22): Unknown column 'available_amount' in 'field list'
mysql> select Available_Amount from available_blood where bloodgroup='AB+(AB Positive Blood Group)';
ERROR 1054 (42S22): Unknown column 'Available_Amount' in 'field list'
mysql> select Amount_available from available_blood where bloodgroup='AB+(AB Positive Blood Group)';
+------------------+
| Amount_available |
+------------------+
|                4 |
+------------------+
1 row in set (0.00 sec)

mysql> update available_blood set amount_available=amount_available+11 where bloodgroup='AB+(AB Positive Blood Group)';
ERROR 1136 (21S01): Column count doesn't match value count at row 1
mysql> ^C
mysql> ^C
mysql> drop trigger donated;
ERROR 1360 (HY000): Trigger does not exist
mysql> drop trigger insert_donated;
Query OK, 0 rows affected (0.67 sec)

mysql> desc donated;
+----------------+-----------+------+-----+-------------------+-------+
| Field          | Type      | Null | Key | Default           | Extra |
+----------------+-----------+------+-----+-------------------+-------+
| Id             | int(11)   | NO   |     | NULL              |       |
| Amount_Donated | int(11)   | NO   |     | NULL              |       |
| created_at     | timestamp | YES  |     | CURRENT_TIMESTAMP |       |
+----------------+-----------+------+-----+-------------------+-------+
3 rows in set (0.09 sec)

mysql> delimiter $$
mysql> create procedure donor_transaction(IN id int , IN amt int)
    -> BEGIN
    -> insert into donated (Id,Amount_Donated) values(id,amt);
    -> END $$
Query OK, 0 rows affected (1.75 sec)

mysql> delimiter ;
mysql> select * from donated;
+----+----------------+---------------------+
| Id | Amount_Donated | created_at          |
+----+----------------+---------------------+
|  1 |              2 | 2019-12-29 13:06:31 |
+----+----------------+---------------------+
1 row in set (0.02 sec)

mysql> select * from available;
ERROR 1146 (42S02): Table 'bloodbankmanagementdb.available' doesn't exist
mysql> select * from available_blood;
+------------------------------+------------------+
| BloodGroup                   | Amount_Available |
+------------------------------+------------------+
| A-(A Negative Blood Group)   |                0 |
| A+(A Positive Blood Group)   |                9 |
| AB-(AB Negative Blood Group) |                0 |
| AB+(AB Positive Blood Group) |               14 |
| B-(B Negative Blood Group)   |                0 |
| B+(B Positive Blood Group)   |                0 |
| O-(O Negative Blood Group)   |                5 |
| O+(O Positive Blood Group)   |                0 |
+------------------------------+------------------+
8 rows in set (0.03 sec)

mysql> select * from available_blood;
+------------------------------+------------------+
| BloodGroup                   | Amount_Available |
+------------------------------+------------------+
| A-(A Negative Blood Group)   |                0 |
| A+(A Positive Blood Group)   |                9 |
| AB-(AB Negative Blood Group) |                0 |
| AB+(AB Positive Blood Group) |               14 |
| B-(B Negative Blood Group)   |                0 |
| B+(B Positive Blood Group)   |                0 |
| O-(O Negative Blood Group)   |               10 |
| O+(O Positive Blood Group)   |                0 |
+------------------------------+------------------+
8 rows in set (0.00 sec)

mysql> select * from donated;
+----+----------------+---------------------+
| Id | Amount_Donated | created_at          |
+----+----------------+---------------------+
|  1 |              2 | 2019-12-29 13:06:31 |
|  3 |              5 | 2019-12-29 15:09:57 |
+----+----------------+---------------------+
2 rows in set (0.00 sec)

mysql> desc patients_taken_blood;
+--------------+-------------+------+-----+-------------------+-------+
| Field        | Type        | Null | Key | Default           | Extra |
+--------------+-------------+------+-----+-------------------+-------+
| Id           | int(11)     | YES  |     | NULL              |       |
| Amount_Taken | varchar(50) | YES  |     | NULL              |       |
| created_at   | timestamp   | YES  |     | CURRENT_TIMESTAMP |       |
+--------------+-------------+------+-----+-------------------+-------+
3 rows in set (0.39 sec)

mysql> select * from patients_taken_blood;
Empty set (0.02 sec)

mysql> delimiter $$
mysql> create procedure patient_transaction(IN id int , IN amt int)
    -> BEGIN
    -> insert into patients_taken_bloood (Id,Amount_Taken) values(id,amt);
    -> END $$
Query OK, 0 rows affected (0.12 sec)

mysql> delimiter ;
mysql> select * from available_blood;
+------------------------------+------------------+
| BloodGroup                   | Amount_Available |
+------------------------------+------------------+
| A-(A Negative Blood Group)   |                0 |
| A+(A Positive Blood Group)   |                9 |
| AB-(AB Negative Blood Group) |                0 |
| AB+(AB Positive Blood Group) |               14 |
| B-(B Negative Blood Group)   |                0 |
| B+(B Positive Blood Group)   |                0 |
| O-(O Negative Blood Group)   |               10 |
| O+(O Positive Blood Group)   |                0 |
+------------------------------+------------------+
8 rows in set (0.11 sec)

mysql> show triggers;
+--------------------------------+--------+-----------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+------------------------+--------------------------------------------+----------------+----------------------+----------------------+--------------------+
| Trigger                        | Event  | Table           | Statement                                                                                                                                                          | Timing | Created                | sql_mode                                   | Definer        | character_set_client | collation_connection | Database Collation |
+--------------------------------+--------+-----------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+------------------------+--------------------------------------------+----------------+----------------------+----------------------+--------------------+
| insert_taken_blood_by_patients | UPDATE | available_blood | begin
if(new.amount_available < old.amount_available) then
insert into patients_taken_blood values(id,(old.amount_available - new.amount_available));
end if;
end | AFTER  | 2019-12-29 02:06:13.07 | STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION | root@localhost | cp850                | cp850_general_ci     | utf8mb4_0900_ai_ci |
| DB                             | INSERT | donors          | insert into donors_backup values(new.Id,new.Firstname,new.Lastname,new.Gender,new.Age,new.Contact,new.Address,new.BloodGroup);                                     | AFTER  | 2019-12-28 22:03:40.50 | STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION | root@localhost | cp850                | cp850_general_ci     | utf8mb4_0900_ai_ci |
| PB                             | INSERT | patients        | begin
insert into patients_backup values(new.Id,new.Firstname,new.Lastname,new.Gender,new.Age,new.Contact,new.Address,new.BloodGroup);
end                         | AFTER  | 2019-12-28 22:01:55.88 | STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION | root@localhost | cp850                | cp850_general_ci     | utf8mb4_0900_ai_ci |
+--------------------------------+--------+-----------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+------------------------+--------------------------------------------+----------------+----------------------+----------------------+--------------------+
3 rows in set (0.10 sec)

mysql> drop trigger insert_patient_taken_blood;
ERROR 1360 (HY000): Trigger does not exist
mysql> drop trigger insert_taken_blood_by_patients;
Query OK, 0 rows affected (0.17 sec)

mysql> show tables;
+---------------------------------+
| Tables_in_bloodbankmanagementdb |
+---------------------------------+
| available_blood                 |
| donated                         |
| donors                          |
| donors_backup                   |
| patients                        |
| patients_backup                 |
| patients_taken_blood            |
+---------------------------------+
7 rows in set (0.03 sec)

mysql> alter table patients_taken_blood
    -> ^C
mysql>
mysql> rename table patients_taken_blood to patients_taken_bloood;
Query OK, 0 rows affected (0.74 sec)

mysql> select * from available_bloood;
ERROR 1146 (42S02): Table 'bloodbankmanagementdb.available_bloood' doesn't exist
mysql> select * from available_bloo;
ERROR 1146 (42S02): Table 'bloodbankmanagementdb.available_bloo' doesn't exist
mysql> select * from available_blood;
+------------------------------+------------------+
| BloodGroup                   | Amount_Available |
+------------------------------+------------------+
| A-(A Negative Blood Group)   |                0 |
| A+(A Positive Blood Group)   |                9 |
| AB-(AB Negative Blood Group) |                0 |
| AB+(AB Positive Blood Group) |               12 |
| B-(B Negative Blood Group)   |                0 |
| B+(B Positive Blood Group)   |                0 |
| O-(O Negative Blood Group)   |               10 |
| O+(O Positive Blood Group)   |                0 |
+------------------------------+------------------+
8 rows in set (0.00 sec)

mysql> select * from patients_taken_bloood;
+------+--------------+---------------------+
| Id   | Amount_Taken | created_at          |
+------+--------------+---------------------+
|    1 | 2            | 2019-12-29 15:55:43 |
+------+--------------+---------------------+
1 row in set (0.00 sec)

mysql> select * from donated;
+----+----------------+---------------------+
| Id | Amount_Donated | created_at          |
+----+----------------+---------------------+
|  1 |              2 | 2019-12-29 13:06:31 |
|  3 |              5 | 2019-12-29 15:09:57 |
+----+----------------+---------------------+
2 rows in set (0.02 sec)

mysql> desc donated;
+----------------+-----------+------+-----+-------------------+-------+
| Field          | Type      | Null | Key | Default           | Extra |
+----------------+-----------+------+-----+-------------------+-------+
| Id             | int(11)   | NO   |     | NULL              |       |
| Amount_Donated | int(11)   | NO   |     | NULL              |       |
| created_at     | timestamp | YES  |     | CURRENT_TIMESTAMP |       |
+----------------+-----------+------+-----+-------------------+-------+
3 rows in set (0.08 sec)

mysql> desc patients_taken_bloood;
+--------------+-------------+------+-----+-------------------+-------+
| Field        | Type        | Null | Key | Default           | Extra |
+--------------+-------------+------+-----+-------------------+-------+
| Id           | int(11)     | YES  |     | NULL              |       |
| Amount_Taken | varchar(50) | YES  |     | NULL              |       |
| created_at   | timestamp   | YES  |     | CURRENT_TIMESTAMP |       |
+--------------+-------------+------+-----+-------------------+-------+
3 rows in set (0.08 sec)

mysql> truncate patients;
Query OK, 0 rows affected (1.20 sec)

mysql> truncate donors;
Query OK, 0 rows affected (1.26 sec)

mysql> update available_blood set amount_available=0;
Query OK, 3 rows affected (0.12 sec)
Rows matched: 8  Changed: 3  Warnings: 0

mysql> truncate patients_taken_bloood;
Query OK, 0 rows affected (1.14 sec)

mysql> truncate donated;
Query OK, 0 rows affected (0.93 sec)

mysql> show tables;
+---------------------------------+
| Tables_in_bloodbankmanagementdb |
+---------------------------------+
| available_blood                 |
| donated                         |
| donors                          |
| donors_backup                   |
| patients                        |
| patients_backup                 |
| patients_taken_bloood           |
+---------------------------------+
7 rows in set (0.13 sec)

mysql> show * from available_blood;
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '* from available_blood' at line 1
mysql> select * from available_blood;
+------------------------------+------------------+
| BloodGroup                   | Amount_Available |
+------------------------------+------------------+
| A-(A Negative Blood Group)   |                0 |
| A+(A Positive Blood Group)   |                0 |
| AB-(AB Negative Blood Group) |                0 |
| AB+(AB Positive Blood Group) |                0 |
| B-(B Negative Blood Group)   |                0 |
| B+(B Positive Blood Group)   |                0 |
| O-(O Negative Blood Group)   |                0 |
| O+(O Positive Blood Group)   |                0 |
+------------------------------+------------------+
8 rows in set (0.11 sec)

mysql> select * from donated;
Empty set (0.06 sec)

mysql> select * from donors;
Empty set (0.04 sec)

mysql> select * from donors_backup;
+----+-----------+----------+--------+-----+------------+----------------+------------------------------+
| Id | Firstname | Lastname | Gender | Age | Contact    | Address        | BloodGroup                   |
+----+-----------+----------+--------+-----+------------+----------------+------------------------------+
|  5 | Sara      | Bennett  | Female |  50 | 7462046952 | 140 W Pecan St | A+(A Positive Blood Group)   |
|  6 | donor     | donor    | Male   |  42 | 1234564569 | address        | AB+(AB Positive Blood Group) |
+----+-----------+----------+--------+-----+------------+----------------+------------------------------+
2 rows in set (0.02 sec)

mysql> truncate donors_backup;
Query OK, 0 rows affected (0.92 sec)

mysql> select * from donors_backup;
Empty set (0.00 sec)

mysql> truncate patients_backup;
Query OK, 0 rows affected (1.11 sec)

mysql> show * from patients_backup;
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '* from patients_backup' at line 1
mysql> select * from patients_backup;
Empty set (0.00 sec)

mysql> select * from patients_taken_bloood;
Empty set (0.02 sec)

mysql> select bloodgroup from patients where id=2;
+----------------------------+
| bloodgroup                 |
+----------------------------+
| A+(A Positive Blood Group) |
+----------------------------+
1 row in set (0.10 sec)

mysql> select * from available_blood;
+------------------------------+------------------+
| BloodGroup                   | Amount_Available |
+------------------------------+------------------+
| A-(A Negative Blood Group)   |                7 |
| A+(A Positive Blood Group)   |                4 |
| AB-(AB Negative Blood Group) |                9 |
| AB+(AB Positive Blood Group) |                2 |
| B-(B Negative Blood Group)   |                1 |
| B+(B Positive Blood Group)   |                4 |
| O-(O Negative Blood Group)   |                4 |
| O+(O Positive Blood Group)   |               11 |
+------------------------------+------------------+
8 rows in set (0.00 sec)

mysql> select amount_available from available_blood where bloodgroup=(select bloodgroup from patients where id=2);
+------------------+
| amount_available |
+------------------+
|                4 |
+------------------+
1 row in set (0.03 sec)

mysql> show procedure status where db='bloodbankmanagementdb';
+-----------------------+------------------------+-----------+----------------+---------------------+---------------------+---------------+---------+----------------------+----------------------+--------------------+
| Db                    | Name                   | Type      | Definer        | Modified            | Created             | Security_type | Comment | character_set_client | collation_connection | Database Collation |
+-----------------------+------------------------+-----------+----------------+---------------------+---------------------+---------------+---------+----------------------+----------------------+--------------------+
| bloodbankmanagementdb | donor_transaction      | PROCEDURE | root@localhost | 2019-12-29 15:03:34 | 2019-12-29 15:03:34 | DEFINER       |         | cp850                | cp850_general_ci     | utf8mb4_0900_ai_ci |
| bloodbankmanagementdb | get_available_amount   | PROCEDURE | root@localhost | 2019-12-29 00:57:34 | 2019-12-29 00:57:34 | DEFINER       |         | cp850                | cp850_general_ci     | utf8mb4_0900_ai_ci |
| bloodbankmanagementdb | minus_available_amount | PROCEDURE | root@localhost | 2019-12-29 01:56:24 | 2019-12-29 01:56:24 | DEFINER       |         | cp850                | cp850_general_ci     | utf8mb4_0900_ai_ci |
| bloodbankmanagementdb | patient_transaction    | PROCEDURE | root@localhost | 2019-12-29 15:23:13 | 2019-12-29 15:23:13 | DEFINER       |         | cp850                | cp850_general_ci     | utf8mb4_0900_ai_ci |
+-----------------------+------------------------+-----------+----------------+---------------------+---------------------+---------------+---------+----------------------+----------------------+--------------------+
4 rows in set (0.10 sec)

mysql> show procedure status where db='bloodbankmanagementdb'\G;
*************************** 1. row ***************************
                  Db: bloodbankmanagementdb
                Name: donor_transaction
                Type: PROCEDURE
             Definer: root@localhost
            Modified: 2019-12-29 15:03:34
             Created: 2019-12-29 15:03:34
       Security_type: DEFINER
             Comment:
character_set_client: cp850
collation_connection: cp850_general_ci
  Database Collation: utf8mb4_0900_ai_ci
*************************** 2. row ***************************
                  Db: bloodbankmanagementdb
                Name: get_available_amount
                Type: PROCEDURE
             Definer: root@localhost
            Modified: 2019-12-29 00:57:34
             Created: 2019-12-29 00:57:34
       Security_type: DEFINER
             Comment:
character_set_client: cp850
collation_connection: cp850_general_ci
  Database Collation: utf8mb4_0900_ai_ci
*************************** 3. row ***************************
                  Db: bloodbankmanagementdb
                Name: minus_available_amount
                Type: PROCEDURE
             Definer: root@localhost
            Modified: 2019-12-29 01:56:24
             Created: 2019-12-29 01:56:24
       Security_type: DEFINER
             Comment:
character_set_client: cp850
collation_connection: cp850_general_ci
  Database Collation: utf8mb4_0900_ai_ci
*************************** 4. row ***************************
                  Db: bloodbankmanagementdb
                Name: patient_transaction
                Type: PROCEDURE
             Definer: root@localhost
            Modified: 2019-12-29 15:23:13
             Created: 2019-12-29 15:23:13
       Security_type: DEFINER
             Comment:
character_set_client: cp850
collation_connection: cp850_general_ci
  Database Collation: utf8mb4_0900_ai_ci
4 rows in set (0.00 sec)

ERROR:
No query specified

mysql> show create procedure get_available_amount;
+----------------------+--------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------+
| Procedure            | sql_mode                                   | Create Procedure                                                                                                                                                                                          | character_set_client | collation_connection | Database Collation |
+----------------------+--------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------+
| get_available_amount | STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION | CREATE DEFINER=`root`@`localhost` PROCEDURE `get_available_amount`(IN id int)
BEGIN
select Amount_Available from available_blood where BloodGroup = (Select BloodGroup from patients where Id = id);

END | cp850                | cp850_general_ci     | utf8mb4_0900_ai_ci |
+----------------------+--------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------+----------------------+--------------------+
1 row in set (0.01 sec)

mysql> select amount_available from available_blood where bloodgroup = 'A+(A Positive BloodGroup)';
Empty set (0.03 sec)

mysql> select amount_available from available_blood where bloodgroup = 'A+(A Positive Blood Group)';
+------------------+
| amount_available |
+------------------+
|                4 |
+------------------+
1 row in set (0.00 sec)

mysql> select amount_available from available_blood where bloodgroup = (select bloodgroup from patients where id=2);
+------------------+
| amount_available |
+------------------+
|                4 |
+------------------+
1 row in set (0.07 sec)

mysql> ^C
mysql> select Amount_Available from available_blood where BloodGroup = (Select BloodGroup from patients where Id = 2);
+------------------+
| Amount_Available |
+------------------+
|                4 |
+------------------+
1 row in set (0.04 sec)

mysql> drop procedure get_available_amount;
Query OK, 0 rows affected (1.31 sec)

mysql> delimiter $$
mysql> create procedure get_available_amount(IN id int)
    -> BEGIN
    -> select  Amount_Available  from available_blood  where BloodGroup = (Select BloodGroup from patients where Id = id);
    ->
    -> END $$
Query OK, 0 rows affected (1.03 sec)

mysql> delimiter ;
mysql> select  Amount_Available  from available_blood  where BloodGroup = (Select BloodGroup from patients where Id = id);
ERROR 1242 (21000): Subquery returns more than 1 row
mysql> select  Amount_Available  from available_blood  where BloodGroup = (Select BloodGroup from patients where Id = id);
ERROR 1242 (21000): Subquery returns more than 1 row
mysql> select  Amount_Available  from available_blood  where BloodGroup = (Select BloodGroup from patients where Id = id);
ERROR 1242 (21000): Subquery returns more than 1 row
mysql> select  Amount_Available  from available_blood  where BloodGroup = (Select BloodGroup from patients where Id = 3);
+------------------+
| Amount_Available |
+------------------+
|               12 |
+------------------+
1 row in set (0.00 sec)

mysql> delimiter $$
mysql> create procedure get_available_amount(r int)
    -> BEGIN
    -> m=r
    -> select  Amount_Available  from available_blood  where BloodGroup = (Select BloodGroup from patients where Id = m);
    ->
    -> END $$
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '=r
select  Amount_Available  from available_blood  where BloodGroup = (Select Bl' at line 3
mysql> delimiter $$
mysql> create procedure get_available_amount(r int)
    -> BEGIN
    -> int m=r
    -> select  Amount_Available  from available_blood  where BloodGroup = (Select BloodGroup from patients where Id = m);
    ->
    -> END $$
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'int m=r
select  Amount_Available  from available_blood  where BloodGroup = (Sele' at line 3
mysql> create procedure get_available_amount(r int)
    -> BEGIN
    -> select(r);
    -> select  Amount_Available  from available_blood  where BloodGroup = (Select BloodGroup from patients where Id = m);
    ->
    -> END $$
ERROR 1304 (42000): PROCEDURE get_available_amount already exists
mysql> drop procedure get_available_amount;
    -> $$
Query OK, 0 rows affected (0.14 sec)

mysql> delimiter $$
mysql> create procedure get_available_amount(r int)
    -> BEGIN
    -> select  Amount_Available  from available_blood  where BloodGroup = (Select BloodGroup from patients where Id = r);
    ->
    -> END $$
Query OK, 0 rows affected (0.14 sec)

mysql> select(3);
    -> $$
+---+
| 3 |
+---+
| 3 |
+---+
1 row in set (0.00 sec)

mysql> select(2);
    -> $$
+---+
| 2 |
+---+
| 2 |
+---+
1 row in set (0.00 sec)

mysql> call get_available_amount(3)$$
+------------------+
| Amount_Available |
+------------------+
|               12 |
+------------------+
1 row in set (0.06 sec)

Query OK, 0 rows affected (0.07 sec)

mysql> drop procedure  minus_available_amount;
    -> $$
Query OK, 0 rows affected (0.63 sec)

mysql> delimiter $$
mysql> create procedure minus_available_amount( IN am int,IN m int)
    -> BEGIN
    -> Update available_blood  set Amount_Available = Amount_Available - am where Bloodgroup = (Select BloodGroup from patients where Id =m);
    -> END $$
Query OK, 0 rows affected (0.14 sec)

mysql> delimiter ;
mysql> delimiter $$
mysql> drop procedure  minus_available_amount;
    -> $$
Query OK, 0 rows affected (0.25 sec)

mysql> delimiter $$
mysql> create procedure minus_available_amount(am int,i int)
    -> BEGIN
    -> Update available_blood  set Amount_Available = Amount_Available - am  where Bloodgroup = (Select BloodGroup from patients where Id =i);
    -> END $$
Query OK, 0 rows affected (0.13 sec)

mysql> delimiter ;
mysql>



mysql> select * from patients;
+----+-----------+------------+--------+-----+------------+----------------------+------------------------------+
| Id | Firstname | Lastname   | Gender | Age | Contact    | Address              | BloodGroup                   |
+----+-----------+------------+--------+-----+------------+----------------------+------------------------------+
|  1 | Gabriel   | Wells      | Male   |  67 | 1320699556 | 6958 Locust Rd       | B-(B Negative Blood Group)   |
|  2 | Janet     | Nichols    | Female |  43 | 1977997361 | 7356 Hogan St        | A+(A Positive Blood Group)   |
|  3 | Lucas     | Larson     | Male   |  25 | 1750867846 | 851 Wycliff Ave      | AB+(AB Positive Blood Group) |
|  4 | Erin      | Bennett    | Female |  22 | 1187370347 | 9206 W Belt Line Rd  | B+(B Positive Blood Group)   |
|  5 | Minnie    | Garrett    | Female |  78 | 1540653331 | 5253 Paddock Way     | AB+(AB Positive Blood Group) |
|  6 | Randy     | Williamson | Male   |  45 | 2069673068 | 9116 Homestead Rd    | O-(O Negative Blood Group)   |
|  7 | Scott     | Knight     | Male   |  63 | 1391192878 | 249 Valley View Ln   | O-(O Negative Blood Group)   |
|  8 | Dylan     | Warren     | Male   |  70 | 1136719515 | 5674 Oak Lawn Ave    | B+(B Positive Blood Group)   |
+----+-----------+------------+--------+-----+------------+----------------------+------------------------------+
8 rows in set (0.10 sec)

mysql> create or replace view patients_view(Id , BloodGroup) as select (Id , BloodGroup) from patients
    -> ;
ERROR 1241 (21000): Operand should contain 1 column(s)
mysql> create or replace view patients_view as select (Id , BloodGroup) from patients;
ERROR 1241 (21000): Operand should contain 1 column(s)
mysql> create or replace view patients_view as select (Id , BloodGroup) from patients;
ERROR 1241 (21000): Operand should contain 1 column(s)
mysql> create or replace view patients_view as select * from patients;
Query OK, 0 rows affected (0.50 sec)

mysql> create or replace view patients_view(Id , BloodGroup) as select Id , BloodGroup from patients
    -> ;
Query OK, 0 rows affected (0.19 sec)

mysql> select * from donors;
+----+-----------+----------+--------+-----+------------+------------------------+------------------------------+
| Id | Firstname | Lastname | Gender | Age | Contact    | Address                | BloodGroup                   |
+----+-----------+----------+--------+-----+------------+------------------------+------------------------------+
|  1 | Victor    | Price    | Male   |  45 | 4278138199 | 6759 Shady Ln Dr       | A+(A Positive Blood Group)   |
|  2 | Ricky     | Murray   | Male   |  20 | 1575583249 | 5503 Brown Terrace     | A-(A Negative Blood Group)   |
|  3 | Roberto   | Hall     | Male   |  25 | 2870174323 | 3884 Groveland Terrace | B+(B Positive Blood Group)   |
|  4 | Peter     | Wilson   | Male   |  31 | 1382156585 | 6675 First Street      | B-(B Negative Blood Group)   |
|  5 | Kathryn   | Chambers | Female |  56 | 1749138490 | 8023 N Stelling Rd     | AB+(AB Positive Blood Group) |
|  6 | Olivia    | Rogers   | Female |  20 |  252813344 | 4011 Hillcrest Rd      | AB-(AB Negative Blood Group) |
|  7 | Terra     | Powell   | Female |  22 | 1127531112 | 993 Oak Lawn Ave       | O+(O Positive Blood Group)   |
|  8 | Sebastian | Barnett  | Male   |  50 | 2310469289 | 5526 Royal Ln          | O+(O Positive Blood Group)   |
|  9 | Meghan    | Butler   | Female |  40 |  315114067 | 9702 Paddock Way       | O-(O Negative Blood Group)   |
| 10 | Dale      | Ramirez  | Male   |  62 | 5323895010 | 969 Thornridge Cir     | A-(A Negative Blood Group)   |
| 11 | Leta      | Mendoza  | Female |  42 | 1360743475 | 5763 W Sherman Dr      | O-(O Negative Blood Group)   |
| 12 | Carter    | Chapman  | Male   |  52 | 1434364213 | 9968 Plum St           | O-(O Negative Blood Group)   |
| 13 | Judy      | Edwards  | Female |  20 | 1347534143 | 7725 E North St        | B+(B Positive Blood Group)   |
+----+-----------+----------+--------+-----+------------+------------------------+------------------------------+
13 rows in set (0.02 sec)

mysql> create or replace view donors_view(Id , BloodGroup) as select Id , BloodGroup from donors;
Query OK, 0 rows affected (0.13 sec)

mysql> select * from donors_view;
+----+------------------------------+
| Id | BloodGroup                   |
+----+------------------------------+
|  1 | A+(A Positive Blood Group)   |
|  2 | A-(A Negative Blood Group)   |
|  3 | B+(B Positive Blood Group)   |
|  4 | B-(B Negative Blood Group)   |
|  5 | AB+(AB Positive Blood Group) |
|  6 | AB-(AB Negative Blood Group) |
|  7 | O+(O Positive Blood Group)   |
|  8 | O+(O Positive Blood Group)   |
|  9 | O-(O Negative Blood Group)   |
| 10 | A-(A Negative Blood Group)   |
| 11 | O-(O Negative Blood Group)   |
| 12 | O-(O Negative Blood Group)   |
| 13 | B+(B Positive Blood Group)   |
+----+------------------------------+
13 rows in set (0.10 sec)

mysql> select * from patients_view;
+----+------------------------------+
| Id | BloodGroup                   |
+----+------------------------------+
|  1 | B-(B Negative Blood Group)   |
|  2 | A+(A Positive Blood Group)   |
|  3 | AB+(AB Positive Blood Group) |
|  4 | B+(B Positive Blood Group)   |
|  5 | AB+(AB Positive Blood Group) |
|  6 | O-(O Negative Blood Group)   |
|  7 | O-(O Negative Blood Group)   |
|  8 | B+(B Positive Blood Group)   |
+----+------------------------------+
8 rows in set (0.13 sec)

mysql>